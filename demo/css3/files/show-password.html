<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="stylesheet" href="../style/demo.css" />
</head>
<body>
	<div class="main">
		<div class="demo-content">
			<input type="password" class="text text-icon-show-password">
			<a href=""></a>
		</div>
	</div>
</body>
<script src="../script/require.js" data-main="../script/"></script>
<script>
	
	require(['jquery'], function()
	{
		$('.text-icon-show-password').after('<a href="javascript:;" class="text-icon-password-inner"></a>')
	    .bind('input propertychange',function()
	    {
	        var $this = $(this);
	        var $delete = $this.next('.text-icon-password-inner');
	        if($this.val().length > 0)
	        {
	            $delete.css({'display' : 'inline-block'});
	        }
	        else
	        {
	            $delete.hide();
	        }
	    }).trigger('propertychange');

	    $(document).delegate('.text-icon-password-inner', 'mousedown mouseup', function(e)
	    {
	        var $this = $(this);
	        var $text = $this.prev('.text-icon-show-password');
	        if($text.size() == 0)
	        {
	            return;
	        }

	        e.type === 'mousedown' ? $text.attr('type', 'text') : $text.attr('type', 'password');
	        
	    });
	});




</script>
</html>