<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="stylesheet" href="../style/x3.css" />
	<link rel="stylesheet" href="..//script/syntaxhighlighter/styles/shCoreDefault.css" />
</head>
<body>
	<div class="main">
		<h2>连接:</h2>
		<pre class="brush: js;">
			http://mingdao.x3china.com/draft
		</pre>
		
		<h2>代码:</h2>
		<pre class="brush: js;">
			$("#submitBtn").click(function(){
		
				if($("#form").find("input[type='checkbox']:not('#selectAll')").is(":checked")){
					$("body").showLoading();
					//选中
					$("#form").submit();
				}else{
					alert("你没有选择");
				}
			});

		</pre>

		<h2>建议:</h2>
		<pre class="brush: js;">
			根据不同的操作给 按钮 指定不同的规则，比如指定 date-type=“delete”
			
			然后再统一的 js 中实现操作，list 页面 table、form 命名一致很简单

			再去除 optimize-1.html 中的重复性 js 代码，list 页面基本也可以实现 “零 js 代码”

		</pre>

		<h2>关于在通用 js 中，实现国际化:</h2>
		<pre class="brush: js;">
			每个页面应该都有一个统一的 meta.jsp 

			<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
			<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
			<!--[if gte IE 8]><link rel="stylesheet" href="${ctx }/style/ie8.css" /><![endif]-->
			<c:if test="${isChinese == 'Y' }"><script src="${ctx }/script/lang-cn.js"></script></c:if>
			<c:if test="${isChinese == 'N' }"><script src="${ctx }/script/lang-en.js"></script></c:if>

			每个 jsp 都会根据语言环境加载一个 lang-cn.js or lang-en.js 
			
			var _lang = 
			{   
				'format' : function(key, args)
				{
					var _str = this[key];
					if(!_str)
					{
						return '';
					}
					var _regex = /{\d+}/g;
					var _result = '';
					var _index = '';
					while((_result = _regex.exec(_str)) !=null)
					{
						_index = (_result[0].match(/\d+/) || [])[0];
						_str = _str.replace(_result[0], arguments[++_index] || '');
					}
					return _str;
				},

				'confirm' : '确定',
				'cancel' : '取消',
				'delete' : '删除',
				'download' : '下载',
				'confirm-delete' : '确定删除记录？',
				'confirm-close' : '确定关闭？',
				'delete-mustone' : '请至少选择一种删除项。',
				'upload-error' : '{0} 文件上传失败。',
				'upload-size-limit' : '上传文件不能大于 {0} 。',

				'upload-file-dialog-title' : '上传附件：',
				'plase-choose-file' : '请先选择一个文件。',
				'confirm-delete-file' : '确定删除当前文件？',
				'plase-choose-one-file' : '一次只能{0}一个文件。',
				'delete-file-error' : '删除文件失败！',

				'current-activity' : '当前节点',
				'current-person' : '当前处理人',

				'submiting' : '提交中...'
			};

			lang js 使用方式：

			alert(_lang['current-activity']);

			alert(_lang.format('upload-error', 'xx 文件');

		</pre>

	</div>
</body>
<script src="..//script/syntaxhighlighter/scripts/shCore.js"></script>
<script src="..//script/syntaxhighlighter/scripts/shBrushJScript.js"></script>
<script>
	SyntaxHighlighter.all();
</script>
</html>