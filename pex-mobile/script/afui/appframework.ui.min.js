!function(a){"use strict";a.fn.actionsheet=function(a){var c,d;for(d=0;d<this.length;d++)c=new b(this[d],a);return 1===this.length?c:this};var b=function(){var b=function(c,d){var e,f,g,h,i,j,k,l,m;if(this.el="string"==typeof c||c instanceof String?document.getElementById(c):c,!this.el)return window.alert("Could not find element for actionsheet "+c),void 0;if(!(this instanceof b))return new b(c,d);if("object"==typeof d)for(e in d)this[e]=d[e];if(f=this,g="<div id='af_actionsheet'><div style='width:100%'>",h="</div></div>",j=function(){},"string"==typeof d)i=a(g+d+"<a href='javascript:;' class='cancel'>Cancel</a>"+h);else if("object"==typeof d)for(i=a(g+h),k=a(i.children().get(0)),d.push({text:"Cancel",cssClasses:"cancel"}),l=0;l<d.length;l++)m=a("<a href='javascript:;'>"+(d[l].text||"TEXT NOT ENTERED")+"</a>"),m[0].onclick=d[l].handler||j,d[l].cssClasses&&d[l].cssClasses.length>0&&m.addClass(d[l].cssClasses),k.append(m);a(c).find("#af_actionsheet").remove(),a(c).find("#af_action_mask").remove(),a(c).append(i),i.vendorCss("Transition","all 0ms"),i.cssTranslate("0,0"),i.css("top",window.innerHeight+"px"),this.el.style.overflow="hidden",i.on("click","a",function(){return f.hideSheet(),!1}),this.activeSheet=i,a(c).append("<div id='af_action_mask' style='position:absolute;top:0px;left:0px;right:0px;bottom:0px;z-index:9998;background:rgba(0,0,0,.4)'/>"),setTimeout(function(){i.vendorCss("Transition","all 300ms"),i.cssTranslate("0,"+-i.height()+"px")},10),a("#af_action_mask").bind("touchstart touchmove touchend click",function(a){a.preventDefault(),a.stopPropagation()})};return b.prototype={activeSheet:null,hideSheet:function(){var c,d,b=this;this.activeSheet.off("click","a",function(){b.hideSheet()}),a(this.el).find("#af_action_mask").unbind("click").remove(),this.activeSheet.vendorCss("Transition","all 0ms"),c=this.activeSheet,d=this.el,setTimeout(function(){c.vendorCss("Transition","all 300ms"),c.cssTranslate("0,0px"),setTimeout(function(){c.remove(),c=null,d.style.overflow="none"},500)},10)}},b}()}(af),function(a){"use strict";var f,g,h,i,b=[],c=function(b){return b.afCSS3AnimateId||(b.afCSS3AnimateId=a.uuid()),b.afCSS3AnimateId},d=function(b){return"string"==typeof b||b instanceof String?document.getElementById(b):a.is$(b)?b[0]:b},e=function(a,e){var f,g,h=d(a);return g=c(h),b[g]?(b[g].animate(e),f=b[g]):(f=i(h,e),b[g]=f),f};a.fn.css3Animate=function(a){var b,c;for(!a.complete&&a.callback&&(a.complete=a.callback),b=e(this[0],a),a.complete=null,a.sucess=null,a.failure=null,c=1;c<this.length;c++)b.link(this[c],a);return b},a.css3AnimateQueue=function(){return new i.queue},f=a.feat.cssTransformStart,g=a.feat.cssTransformEnd,h=a.feat.cssPrefix.replace(/-/g,"")+"TransitionEnd",h=a.os.fennec||""===a.feat.cssPrefix||a.os.ie?"transitionend":h,h=h.replace(h.charAt(0),h.charAt(0).toLowerCase()),i=function(){var c=function(d,e){if(!(this instanceof c))return new c(d,e);if(this.callbacksStack=[],this.activeEvent=null,this.countStack=0,this.isActive=!1,this.el=d,this.linkFinishedProxy=a.proxy(this.linkFinished,this),this.el){this.animate(e);var f=this;af(this.el).bind("destroy",function(){var a=f.el.afCSS3AnimateId;f.callbacksStack=[],b[a]&&delete b[a]})}};return c.prototype={animate:function(b){var c,d,e,i,j,k,l,n,m,o;return this.isActive&&this.cancel(),this.isActive=!0,b?(c=!!b.addClass,i=numOnly(b.time),c?b.removeClass?af(this.el).replaceClass(b.removeClass,b.addClass):af(this.el).addClass(b.addClass):(0===i&&(b.time=0),b.y||(b.y=0),b.x||(b.x=0),b.previous&&(j=new a.getCssMatrix(this.el),b.y+=numOnly(j.f),b.x+=numOnly(j.e)),b.origin||(b.origin="0% 0%"),b.scale||(b.scale="1"),b.rotateY||(b.rotateY="0"),b.rotateX||(b.rotateX="0"),b.skewY||(b.skewY="0"),b.skewX||(b.skewX="0"),b.timingFunction||(b.timingFunction="linear"),("number"==typeof b.x||-1===b.x.indexOf("%")&&-1===b.x.toLowerCase().indexOf("px")&&-1===b.x.toLowerCase().indexOf("deg"))&&(b.x=parseInt(b.x,10)+"px"),("number"==typeof b.y||-1===b.y.indexOf("%")&&-1===b.y.toLowerCase().indexOf("px")&&-1===b.y.toLowerCase().indexOf("deg"))&&(b.y=parseInt(b.y,10)+"px"),k="translate"+f+b.x+","+b.y+g+" scale("+parseFloat(b.scale)+") rotate("+b.rotateX+")",a.os.opera||(k+=" rotateY("+b.rotateY+")"),k+=" skew("+b.skewX+","+b.skewY+")",this.el.style[a.feat.cssPrefix+"Transform"]=k,this.el.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden",l=a.feat.cssPrefix+"Transform",void 0!==b.opacity&&(this.el.style.opacity=b.opacity,l+=", opacity"),b.width&&(this.el.style.width=b.width,l="all"),b.height&&(this.el.style.height=b.height,l="all"),this.el.style[a.feat.cssPrefix+"TransitionProperty"]="all",-1===(""+b.time).indexOf("s")?(d="ms",e=b.time+d):-1!==b.time.indexOf("ms")?(d="ms",e=b.time):(d="s",e=b.time+d),b.delay&&(this.el.style[a.feat.cssPrefix+"TransitionDelay"]=b.delay),this.el.style[a.feat.cssPrefix+"TransitionDuration"]=e,this.el.style[a.feat.cssPrefix+"TransitionTimingFunction"]=b.timingFunction,this.el.style[a.feat.cssPrefix+"TransformOrigin"]=b.origin),this.callbacksStack.push({complete:b.complete,success:b.success,failure:b.failure}),this.countStack++,m=this,o=window.getComputedStyle(this.el),c&&(n=o[a.feat.cssPrefix+"TransitionDuration"],i=numOnly(n),b.time=i,-1!==n.indexOf("ms")?d="ms":(d="s",b.time*=1e3)),0===i||"ms"===d&&5>i||"none"===o.display?a.asap(a.proxy(this.finishAnimation,this,[!1])):(this.activeEvent=function(a){clearTimeout(m.timeout),m.finishAnimation(a),m.el.removeEventListener(h,m.activeEvent,!1)},m.timeout=setTimeout(this.activeEvent,numOnly(b.time)+50),this.el.addEventListener(h,this.activeEvent,!1)),void 0):(window.alert("Please provide configuration options for animation of "+this.el.id),void 0)},addCallbackHook:function(a){return a&&this.callbacksStack.push(a),this.countStack++,this.linkFinishedProxy},linkFinished:function(a){a?this.cancel():this.finishAnimation()},finishAnimation:function(a){a&&a.preventDefault&&a.preventDefault(),this.isActive&&(this.countStack--,0===this.countStack&&this.fireCallbacks(!1))},fireCallbacks:function(a){var b,c,d,e,f;for(this.clearEvents(),b=this.callbacksStack,this.cleanup(),c=0;c<b.length;c++)d=b[c].complete,e=b[c].success,f=b[c].failure,"function"==typeof d&&d(a),a&&"function"==typeof f?f():"function"==typeof e&&e()},cancel:function(){this.isActive&&this.fireCallbacks(!0)},cleanup:function(){this.callbacksStack=[],this.isActive=!1,this.countStack=0},clearEvents:function(){this.activeEvent&&this.el.removeEventListener(h,this.activeEvent,!1),this.activeEvent=null},link:function(a,b){var c={complete:b.complete,success:b.success,failure:b.failure};return b.complete=this.addCallbackHook(c),b.success=null,b.failure=null,e(a,b),b.complete=c.complete,b.success=c.success,b.failure=c.failure,this}},c}(),i.queue=function(){return{elements:[],push:function(a){this.elements.push(a)},pop:function(){return this.elements.pop()},run:function(){var b,c,a=this;0!==this.elements.length&&("function"==typeof this.elements[0]&&(b=this.shift(),b()),0!==this.elements.length&&(c=this.shift(),this.elements.length>0&&(c.complete=function(b){b||a.run()}),i(document.getElementById(c.id),c)))},shift:function(){return this.elements.shift()}}}}(af),Date.now||(Date.now=function(){"use strict";return(new Date).getTime()}),function(){"use strict";var b,c,d,a=["webkit","moz","ms"];for(b=0;b<a.length&&!window.requestAnimationFrame;++b)c=a[b],window.requestAnimationFrame=window[c+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"];!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||(d=0,window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(d+16,b);return setTimeout(function(){a(d=c)},c-b)},window.cancelAnimationFrame=clearTimeout)}(),function(a){"use strict";var f,g,b=[],c=function(b){return b.afAnimateId||(b.afAnimateId=a.uuid()),b.afAnimateId},d=function(b){return"string"==typeof b||b instanceof String?document.getElementById(b):a.is$(b)?b[0]:b},e=function(a,e){var g,h,i=d(a);return h=c(i),b[h]?(e&&b[h].animate(e),g=b[h]):(g=f(i,e),b[h]=g),g};a.fn.animate=function(a){var b=e(this[0],a);return b},f=function(a,c){if(!(this instanceof f))return new f(a,c);if(this.el=a,this.el){c&&this.animate(c);var d=this;af(this.el).bind("destroy",function(){var a=d.el.afAnimateId;b[a]&&delete b[a]})}},f.prototype={animationTimer:null,isAnimating:!1,startX:0,startY:0,runTime:0,endX:0,endY:0,currX:0,currY:0,animationStartTime:0,pauseTime:0,completeCB:null,easingFn:"linear",animateOpts:{},updateCb:null,animate:function(b){var c=this;c.isAnimating||(c.isAnimating=!0,window.cancelAnimationFrame(c.animationTimer),b||(b={x:0,y:0,duration:0}),this.easingFn=b.easing||"linear",this.completeCB=b.complete||null,this.updateCB=b.update||null,this.runTime=numOnly(b.duration),b.complete&&delete b.complete,this.animateOpts=b,this.startTime=Date.now(),this.startMatrix=a.getCssMatrix(this.el),0===this.runTime&&this.doAnimate())},start:function(){this.doAnimate()},doAnimate:function(){var b,c,d,a=Date.now(),e=this;return 0===this.runTime||a>=this.startTime+this.runTime?(e.setPosition(this.animateOpts.x,this.animateOpts.y),e.isAnimating=!1,this.updateCB&&this.updateCB({x:this.animateOpts.x,y:this.animateOpts.y}),this.completeCB&&this.completeCB(),void 0):(a=(a-this.startTime)/this.runTime,a=a>1?1:a,d=g[this.easingFn](a),b=(this.animateOpts.x-this.startMatrix.e)*d+this.startMatrix.e,c=(this.animateOpts.y-this.startMatrix.f)*d+this.startMatrix.f,this.setPosition(b,c),this.updateCB&&this.updateCB({x:b,y:c}),this.isAnimating&&(this.animationTimer=window.requestAnimationFrame(function(){e.doAnimate()})),void 0)},setPosition:function(b,c){this.el.style[a.feat.cssPrefix+"Transform"]="matrix3d( 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+b+", "+c+", 0, 1 )",this.currX=b,this.currY=c},stop:function(){this.isAnimating=!1,window.cancelAnimationFrame(this.animationTimer),this.pauseTime=Date.now()-this.startTime},resume:function(){this.isAnimating=!0,this.startTime=Date.now()-this.pauseTime,this.doAnimate()}},g={linear:function(a){return a},easeOutSine:function(a){return Math.sin(a*Math.PI/2)}}}(af),function(a){"use strict";a.passwordBox=function(){return new b};var b=function(){this.oldPasswords={}};b.prototype={showPasswordPlainText:!1,getOldPasswords:function(b){var d,e,c=b&&document.getElementById(b)?document.getElementById(b):document;if(!c)return window.alert("Could not find container element for passwordBox "+b),void 0;for(d=c.getElementsByTagName("input"),e=0;e<d.length;e++)"password"===d[e].type&&a.os.webkit&&(d[e].type="text",a(d[e]).vendorCss("TextSecurity","disc"))},changePasswordVisiblity:function(b,c){b=parseInt(b,10);var d=document.getElementById(c);1===b?a(d).vendorCss("TextSecurity","none"):a(d).vendorCss("TextSecurity","disc"),a.os.webkit||(d.type=1===b?"text":"password"),d=null}}}(af),function(a){"use strict";function f(a){return c[a].el?!0:(delete c[a],!1)}function g(){if(a.os.android&&!a.os.chrome&&a.os.webkit){var b=!1;a.bind(a.touchLayer,["cancel-enter-edit","exit-edit"],function(){if(b){b=!1;for(var a in c)f(a)&&c[a].androidFormsMode&&c[a].stopFormsMode()}})}e=!0}var e,h,b=325,c=[],d=function(b){return b.afScrollerId||(b.afScrollerId=a.uuid()),b.afScrollerId};a.fn.scroller=function(b){var e,f,g;for(g=0;g<this.length;g++)f=d(this[g]),c[f]?e=c[f]:(b||(b={}),a.feat.nativeTouchScroll||(b.useJsScroll=!0),e=h(this[g],b),c[f]=e);return 1===this.length?e:this},e=!1,h=function(){function j(b,c){var d=document.createElement("div");return d.style.position="absolute",d.style.width=b+"px",d.style.height=c+"px",d.style[a.feat.cssPrefix+"BorderRadius"]="2px",d.style.borderRadius="2px",d.style.display="none",d.className="scrollBar",d.style.background="black",d}var d,f,h=function(b,c){var h,j;return!e&&a.touchLayer&&a.isObject(a.touchLayer)?g():a.touchLayer&&a.isObject(a.touchLayer)||(a.touchLayer={}),(h="string"==typeof b||b instanceof String?document.getElementById(b):b)?(j=a(h),c.hasParent&&(j=j.parent()),j.hasClass("x-scroll")&&(c.horizontalScroll=!0),j.hasClass("y-scroll")&&(c.verticalScroll=!0),a.os.desktop?new i(h,c):c.useJsScroll?new d(h,c):new f(h,c)):(window.alert("Could not find element for scroller "+b),void 0)},i=function(b,c){this.el=b,this.afEl=a(this.el);for(var d in c)this[d]=c[d]};return i.prototype={refresh:!1,refreshContent:"Pull to Refresh",refreshHangTimeout:2e3,refreshHeight:60,refreshElement:null,refreshCancelCB:null,refreshRunning:!1,scrollTop:0,scrollLeft:0,preventHideRefresh:!0,verticalScroll:!0,horizontalScroll:!1,refreshTriggered:!1,moved:!1,eventsActive:!1,rememberEventsActive:!1,scrollingLocked:!1,autoEnable:!0,blockFormsFix:!1,loggedPcentY:0,loggedPcentX:0,infinite:!1,infiniteEndCheck:!1,infiniteTriggered:!1,scrollSkip:!1,scrollTopInterval:null,scrollLeftInterval:null,bubbles:!0,lockBounce:!1,initScrollProgress:!1,_scrollTo:function(a,b){var c,d,e,f,g,h,i,j;return b=parseInt(b,10),0===b||isNaN(b)?(this.el.scrollTop=Math.abs(a.y),this.el.scrollLeft=Math.abs(a.x),void 0):(c=10,d=(this.el.scrollTop-a.y)/Math.ceil(b/c),e=(this.el.scrollLeft-a.x)/Math.ceil(b/c),f=this,g=Math.ceil(this.el.scrollTop-a.y)/d,h=Math.ceil(this.el.scrollLeft-a.x)/d,i=0,j=0,f.scrollTopInterval=window.setInterval(function(){f.el.scrollTop-=d,j++,j>=g&&(f.el.scrollTop=a.y,clearInterval(f.scrollTopInterval))},c),f.scrollLeftInterval=window.setInterval(function(){f.el.scrollLeft-=e,i++,i>=h&&(f.el.scrollLeft=a.x,clearInterval(f.scrollLeftInterval))},c),void 0)},enable:function(){},disable:function(){},hideScrollbars:function(){},addPullToRefresh:function(){},_scrollToTop:function(a){this._scrollTo({x:0,y:0},a)},_scrollToBottom:function(a){this._scrollTo({x:0,y:this.el.scrollHeight-this.el.offsetHeight},a)},scrollToBottom:function(a){return this._scrollToBottom(a)},scrollToTop:function(a){return this._scrollToTop(a)},init:function(b,d){var e,f,g;this.el=b,this.afEl=a(this.el),this.defaultProperties();for(e in d)this[e]=d[e];f=this,g=function(){!f.eventsActive||a.feat.nativeTouchScroll||a.ui&&a.ui.activeDiv!==f.container||f.adjustScroll()},this.afEl.bind("destroy",function(){f.disable(!0);var b=f.el.afScrollerId;c[b]&&delete c[b],a.unbind(a.touchLayer,"orientationchange-reshape",g)}),a.bind(a.touchLayer,"orientationchange-reshape",g),a(window).bind("resize",g)},needsFormsFix:function(b){return this.useJsScroll&&this.isEnabled()&&"none"!==this.el.style.display&&a(b).closest(this.afEl).size()>0},handleEvent:function(a){if(!this.scrollingLocked)switch(a.type){case"touchstart":clearInterval(this.scrollTopInterval),this.preventHideRefresh=!this.refreshRunning,this.moved=!1,this.onTouchStart(a),this.bubbles||a.stopPropagation();break;case"touchmove":this.onTouchMove(a),this.bubbles||a.stopPropagation();break;case"touchend":this.onTouchEnd(a),this.bubbles||a.stopPropagation();break;case"scroll":this.onScroll(a)}},coreAddPullToRefresh:function(b){var c,d,e;b&&(this.refreshElement=b),null===this.refreshElement?(d=document.getElementById(this.container.id+"_pulldown"),c=null!==d?a(d):a("<div id='"+this.container.id+"_pulldown' class='afscroll_refresh' style='position:relative;height:60px;text-align:center;line-height:60px;font-weight:bold;'>"+this.refreshContent+"</div>")):c=a(this.refreshElement),e=c.get(0),this.refreshContainer=a("<div style='overflow:hidden;height:0;width:100%;display:none;background:inherit;-webkit-backface-visibility: hidden !important;'></div>"),a(this.el).prepend(this.refreshContainer.prepend(e)),this.refreshContainer=this.refreshContainer[0]},fireRefreshRelease:function(b){var c,d;this.refresh&&b&&(this.setRefreshContent("Refreshing..."),c=a.trigger(this,"refresh-release",[b])!==!1,this.preventHideRefresh=!1,this.refreshRunning=!0,c&&(d=this,this.refreshHangTimeout>0&&(this.refreshCancelCB=setTimeout(function(){d.hideRefresh()},this.refreshHangTimeout))))},setRefreshContent:function(b){a(this.container).find(".afscroll_refresh").html(b)},lock:function(){this.scrollingLocked||(this.scrollingLocked=!0,this.rememberEventsActive=this.eventsActive,this.eventsActive&&this.disable())},unlock:function(){this.scrollingLocked&&(this.scrollingLocked=!1,this.rememberEventsActive&&this.enable())},scrollToItem:function(b,c){a.is$(b)||(b=a(b));var d,e,f,g;"bottom"===c?(e=b.offset(),d=e.top-this.afEl.offset().bottom+e.height,d+=4):(g=b.offset().top,d=g-document.body.scrollTop,f=this.afEl.offset().top,document.body.scrollTop<f&&(d-=f),d-=4),this.scrollBy({y:d,x:0},0)},setPaddings:function(b,c){var d=a(this.el),e=numOnly(d.css("paddingTop"));d.css("paddingTop",b+"px").css("paddingBottom",c+"px"),this.scrollBy({y:b-e,x:0})},divide:function(a,b){return 0!==b?a/b:0},isEnabled:function(){return this.eventsActive},addInfinite:function(){this.infinite=!0},clearInfinite:function(){this.infiniteTriggered=!1,this.scrollSkip=!0},scrollTo:function(a,b){return this._scrollTo(a,b)},updateP2rHackPosition:function(){}},d=function(b,c){var d,e;this.init(b,c),c.hasParent?this.container=this.el.parentNode:(d=a.create("div",{}),d.append(a(this.el).contents()),a(this.el).append(d),this.container=this.el,this.el=d.get(0)),this.container.afScrollerId=b.afScrollerId,this.afEl=a(this.container),"hidden"!==this.container.style.overflow&&(this.container.style.overflow="hidden"),this.addPullToRefresh(null,!0),c.autoEnable&&(this.autoEnable=c.autoEnable),this.autoEnable&&this.enable(!0),this.verticalScroll&&this.verticalScroll===!0&&this.scrollBars===!0&&(e=j(5,20),e.style.top="0px",this.vScrollCSS&&(e.className=this.vScrollCSS),e.style.display="none",this.container.appendChild(e),this.vscrollBar=e,e=null),this.horizontalScroll&&this.horizontalScroll===!0&&this.scrollBars===!0&&(e=j(20,5),e.style.bottom="0px",this.hScrollCSS&&(e.className=this.hScrollCSS),e.style.display="none",this.container.appendChild(e),this.hscrollBar=e,e=null),this.horizontalScroll&&(this.el.style.cssFloat="left"),this.el.hasScroller=!0},f=function(b,c){var d,e;c.nativeParent&&(b=b.parentNode),this.init(b,c),d=a(b),c.replaceParent===!0&&(e=d.parent(),d.css("height",e.height()).css("width",e.width()),d.insertBefore(d.parent()),e.remove()),this.container=this.el,d.css("-webkit-overflow-scrolling","touch"),c.autoEnable&&(this.autoEnable=c.autoEnable),this.autoEnable&&this.enable()},f.prototype=new i,d.prototype=new i,f.prototype.defaultProperties=function(){this.refreshContainer=null,this.dY=this.cY=0,this.dX=this.cX=0,this.cancelPropagation=!1,this.loggedPcentY=0,this.loggedPcentX=0,this.xReset=0,this.yReset=0;var a=this;this.adjustScrollOverflowProxy=function(){a.afEl.css("overflow","auto"),a.afEl.parent().css("overflow","hidden")}},f.prototype.enable=function(a){this.eventsActive||(this.eventsActive=!0,this.el.style.overflow="auto",a||this.adjustScroll(),this.el.addEventListener("touchstart",this,!1),this.el.addEventListener("scroll",this,!1),this.updateP2rHackPosition())},f.prototype.disable=function(b){this.eventsActive&&(this.logPos(this.el.scrollLeft,this.el.scrollTop),b||a.ui||(this.el.style.overflow="hidden"),this.el.removeEventListener("touchstart",this,!1),this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.el.removeEventListener("scroll",this,!1),this.eventsActive=!1)},f.prototype.addPullToRefresh=function(a,b){b||(this.refresh=!0),this.refresh&&this.refresh===!0&&(this.coreAddPullToRefresh(a),this.refreshContainer.style.position="absolute",this.refreshContainer.style.top="-60px",this.refreshContainer.style.height="60px",this.refreshContainer.style.display="block",this.updateP2rHackPosition())},f.prototype.updateP2rHackPosition=function(){if(!this.refresh)return a(this.el).find(".p2rhack").remove();var b=a(this.el).find(".p2rhack");0===b.length&&(a(this.el).append("<div class='p2rhack' style='position:absolute;width:1px;height:1px;opacity:0;background:transparent;z-index:-1;-webkit-transform:translate3d(-1px,0,0);'></div>"),b=a(this.el).find(".p2rhack")),b.css("top",this.el.scrollHeight+this.refreshHeight+1+"px")},f.prototype.onTouchStart=function(a){this.lastScrollInfo={top:0},this.xReset=this.yReset=0,this.verticalScroll&&(0===this.el.scrollTop&&this.refresh&&(this.el.scrollTop=1,this.yReset=-1),this.el.scrollTop===this.el.scrollHeight-this.el.clientHeight&&this.infinite&&(this.el.scrollTop-=1,this.yReset=1)),this.horizontalScroll&&(0===this.el.scrollLeft&&(this.el.scrollLeft=1,this.xReset=-1),this.el.scrollLeft===this.el.scrollWidth-this.el.clientWidth&&(this.el.scrollLeft-=1,this.xReset=1)),this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.refresh&&this.el.addEventListener("touchend",this,!1),this.el.addEventListener("touchmove",this,!1),this.dY=a.touches[0].pageY,this.dX=a.touches[0].pageX,this.startTop=this.el.scrollTop,this.startLeft=this.el.scrollLeft,(this.refresh||this.infinite)&&this.refresh&&this.dY<0&&this.showRefresh()},f.prototype.onTouchMove=function(b){var c=b.touches[0].pageY-this.dY,d=b.touches[0].pageX-this.dX,e=this.el.scrollHeight-this.el.scrollTop===this.el.clientHeight&&0>c,f=this.el.scrollWidth-this.el.scrollLeft===this.el.clientWidth&&0>d,g="input"!==b.target.tagName.toLowerCase();this.verticalScroll&&0===this.startTop&&0===this.el.scrollTop&&c>0&&g&&b.preventDefault(),this.horizontalScroll&&0===this.startTop&&0===this.el.scrollLeft&&d>0&&g&&b.preventDefault(),this.verticalScroll&&e&&g&&b.preventDefault(),this.horizontalScroll&&f&&g&&b.preventDefault(),this.moved||(a.trigger(this,"scrollstart",[this.el,{x:d,y:c}]),a.trigger(a.touchLayer,"scrollstart",[this.el,{x:d,y:c}]),this.refresh||this.el.addEventListener("touchend",this,!1),this.moved=!0),this.horizontalScroll&&Math.abs(c)>Math.abs(d)&&b.preventDefault(),this.refresh&&this.el.scrollTop<-this.refreshHeight?this.showRefresh():this.refresh&&this.refreshTriggered&&this.refreshRunning&&this.el.scrollTop>this.refreshHeight?(this.refreshTriggered=!1,this.refreshRunning=!1,this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.hideRefresh(!1),this.setRefreshContent("Pull to Refresh"),a.trigger(this,"refresh-cancel")):this.refresh&&this.refreshTriggered&&!this.refreshRunning&&this.el.scrollTop>-this.refreshHeight&&(this.refreshTriggered=!1,this.refreshRunning=!1,this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.hideRefresh(!1),this.setRefreshContent("Pull to Refresh"),a.trigger(this,"refresh-cancel")),this.cY=c,this.cX=d,this.lastScrollInfo.top=this.cY,this.initScrollProgress&&(a.trigger(this,"scroll",[{x:-this.el.scrollLeft,y:-this.el.scrollTop}]),a.trigger(a.touchLayer,"scroll",[{x:-this.el.scrollLeft,y:-this.el.scrollTop}]))},f.prototype.showRefresh=function(){this.refreshTriggered||(this.refreshTriggered=!0,this.setRefreshContent("Release to Refresh"),a.trigger(this,"refresh-trigger"))},f.prototype.onTouchEnd=function(){var e,f,g,h,i,c=this.el.scrollTop<=-this.refreshHeight,d=this;this.fireRefreshRelease(c,!0),this.moved||(this.el.scrollTop+=this.yReset,this.el.scrollLeft+=this.xReset),c&&this.refresh&&(e=a.create("<div style='height:"+this.el.clientHeight+this.refreshHeight+"px;width:1px;-webkit-transform:translated3d(-1px,0,0)'></div>"),a(this.el).append(e),d.refreshContainer.style.top="0px",d.refreshContainer.style.position="",setTimeout(function(){e.remove()})),this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.infiniteEndCheck=!0,this.infinite&&!this.infiniteTriggered&&this.el.scrollTop>=this.el.scrollHeight-this.el.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0),this.touchEndFired=!0,f=200,g=this,h={top:this.el.scrollTop,left:this.el.scrollLeft},i=0,clearInterval(g.nativePolling),g.nativePolling=setInterval(function(){return i++,i===parseInt(f/8,10)&&g.initScrollProgress&&(a.trigger(g,"scroll",[{x:-g.el.scrollLeft+g.cX,y:-g.el.scrollTop+g.cY}]),a.trigger(a.touchLayer,"scroll",[{x:-g.el.scrollLeft+g.cX,y:-g.el.scrollTop+g.cY}])),i>=f?(clearInterval(g.nativePolling),g.initScrollProgress&&(a.trigger(g,"scroll",[{x:-g.el.scrollLeft,y:-g.el.scrollTop}]),a.trigger(a.touchLayer,"scroll",[{x:-g.el.scrollLeft,y:-g.el.scrollTop}])),void 0):((g.el.scrollTop!==h.top||g.el.scrollLeft!==h.left)&&(clearInterval(g.nativePolling),a.trigger(a.touchLayer,"scrollend",[g.el]),a.trigger(g,"scrollend",[g.el]),g.initScrollProgress&&(a.trigger(g,"scroll",[{x:-g.el.scrollLeft,y:-g.el.scrollTop}]),a.trigger(a.touchLayer,"scroll",[{x:-g.el.scrollLeft,y:-g.el.scrollTop}]))),void 0)},20)},f.prototype.hideRefresh=function(c){var d,e;this.preventHideRefresh||(d=this,e=function(b){d.refreshContainer.style.top="-60px",d.refreshContainer.style.position="absolute",d.dY=d.cY=0,b||(d.el.style[a.feat.cssPrefix+"Transform"]="none",d.el.style[a.feat.cssPrefix+"TransitionProperty"]="none",d.el.scrollTop=0,d.logPos(d.el.scrollLeft,0),d.refreshRunning=!1,d.setRefreshContent("Pull to Refresh"),a.trigger(d,"refresh-finish"))},c!==!1&&d.afEl.css3Animate?d.afEl.css3Animate({y:d.el.scrollTop-d.refreshHeight+"px",x:"0%",time:b+"ms",complete:e}):e(),this.refreshTriggered=!1)},f.prototype.hideScrollbars=function(){},f.prototype.scrollTo=function(a,b){return this.logPos(a.x,a.y),a.x*=-1,a.y*=-1,this._scrollTo(a,b)},f.prototype.scrollBy=function(a,b){return a.x+=this.el.scrollLeft,a.y+=this.el.scrollTop,this.logPos(this.el.scrollLeft,this.el.scrollTop),this._scrollTo(a,b)},f.prototype.scrollToBottom=function(a){this._scrollToBottom(a),this.logPos(this.el.scrollLeft,this.el.scrollTop)},f.prototype.onScroll=function(){if(this.infinite&&this.touchEndFired)return this.touchEndFired=!1,void 0;if(this.scrollSkip)return this.scrollSkip=!1,void 0;this.infinite&&!this.infiniteTriggered&&this.el.scrollTop>=this.el.scrollHeight-this.el.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0);var c=this;this.infinite&&this.infiniteEndCheck&&this.infiniteTriggered&&(this.infiniteEndCheck=!1,a.trigger(c,"infinite-scroll-end"))},f.prototype.logPos=function(a,b){this.loggedPcentX=this.divide(a,this.el.scrollWidth),this.loggedPcentY=this.divide(b,this.el.scrollHeight),this.scrollLeft=a,this.scrollTop=b,isNaN(this.loggedPcentX)&&(this.loggedPcentX=0),isNaN(this.loggedPcentY)&&(this.loggedPcentY=0)},f.prototype.adjustScroll=function(){this.adjustScrollOverflowProxy(),this.el.scrollLeft=this.loggedPcentX*this.el.scrollWidth,this.el.scrollTop=this.loggedPcentY*this.el.scrollHeight,this.logPos(this.el.scrollLeft,this.el.scrollTop)},d.prototype.defaultProperties=function(){this.boolScrollLock=!1,this.currentScrollingObject=null,this.elementInfo=null,this.verticalScroll=!0,this.horizontalScroll=!1,this.scrollBars=!0,this.vscrollBar=null,this.hscrollBar=null,this.hScrollCSS="scrollBar",this.vScrollCSS="scrollBar",this.firstEventInfo=null,this.moved=!1,this.preventPullToRefresh=!0,this.isScrolling=!1,this.androidFormsMode=!1,this.refreshSafeKeep=!1,this.lastScrollbar="",this.finishScrollingObject=null,this.container=null,this.scrollingFinishCB=null,this.loggedPcentY=0,this.loggedPcentX=0,this.androidPerfHack=0},d.prototype.enable=function(a){this.eventsActive||(this.eventsActive=!0,a?this.scrollerMoveCSS({x:0,y:0},0):this.adjustScroll(),this.container.addEventListener("touchstart",this,!1),this.container.addEventListener("touchmove",this,!1),this.container.addEventListener("touchend",this,!1))},d.prototype.adjustScroll=function(){var a=this.getViewportSize();this.scrollerMoveCSS({x:Math.round(this.loggedPcentX*(this.el.clientWidth-a.w)),y:Math.round(this.loggedPcentY*(this.el.clientHeight-a.h))},0)},d.prototype.disable=function(){if(this.eventsActive){var a=this.getCSSMatrix(this.el);this.logPos(numOnly(a.e)-numOnly(this.container.scrollLeft),numOnly(a.f)-numOnly(this.container.scrollTop)),this.container.removeEventListener("touchstart",this,!1),this.container.removeEventListener("touchmove",this,!1),this.container.removeEventListener("touchend",this,!1),this.eventsActive=!1}},d.prototype.addPullToRefresh=function(a,b){b||(this.refresh=!0),this.refresh&&this.refresh===!0&&(this.coreAddPullToRefresh(a),this.el.style.overflow="visible")},d.prototype.hideScrollbars=function(){this.hscrollBar&&(this.hscrollBar.style.display="none",this.hscrollBar.style[a.feat.cssPrefix+"TransitionDuration"]="0ms"),this.vscrollBar&&(this.vscrollBar.style.display="none",this.vscrollBar.style[a.feat.cssPrefix+"TransitionDuration"]="0ms")},d.prototype.getViewportSize=function(){var a=window.getComputedStyle(this.container);return isNaN(numOnly(a.paddingTop))&&window.alert(typeof a.paddingTop+"::"+a.paddingTop+":"),{h:this.container.clientHeight>window.innerHeight?window.innerHeight:this.container.clientHeight-numOnly(a.paddingTop)-numOnly(a.paddingBottom),w:this.container.clientWidth>window.innerWidth?window.innerWidth:this.container.clientWidth-numOnly(a.paddingLeft)-numOnly(a.paddingRight)}},d.prototype.onTouchStart=function(b){var c,d,e,f;this.moved=!1,this.currentScrollingObject=null,a(this.el).animate().stop(),this.container&&(this.refreshCancelCB&&(clearTimeout(this.refreshCancelCB),this.refreshCancelCB=null),this.scrollingFinishCB&&(clearTimeout(this.scrollingFinishCB),this.scrollingFinishCB=null),1!==b.touches.length||this.boolScrollLock||b.touches[0].target&&void 0!==b.touches[0].target.type&&(c=b.touches[0].target.tagName.toLowerCase(),"select"===c)||(d={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0},this.elementInfo={},e=this.getViewportSize(),this.elementInfo.bottomMargin=e.h,this.elementInfo.maxTop=this.el.clientHeight-this.elementInfo.bottomMargin,this.elementInfo.maxTop<0&&(this.elementInfo.maxTop=0),this.elementInfo.divHeight=this.el.clientHeight,this.elementInfo.rightMargin=e.w,this.elementInfo.maxLeft=this.el.clientWidth-this.elementInfo.rightMargin,this.elementInfo.maxLeft<0&&(this.elementInfo.maxLeft=0),this.elementInfo.divWidth=this.el.clientWidth,this.elementInfo.hasVertScroll=this.verticalScroll||this.elementInfo.maxTop>0,this.elementInfo.hasHorScroll=this.elementInfo.maxLeft>0,this.elementInfo.requiresVScrollBar=this.vscrollBar&&this.elementInfo.hasVertScroll,this.elementInfo.requiresHScrollBar=this.hscrollBar&&this.elementInfo.hasHorScroll,this.saveEventInfo(b),this.saveFirstEventInfo(b),f=this.getCSSMatrix(this.el),d.top=numOnly(f.f)-numOnly(this.container.scrollTop),d.left=numOnly(f.e)-numOnly(this.container.scrollLeft),this.container.scrollTop=this.container.scrollLeft=0,this.currentScrollingObject=this.el,this.refresh&&0===d.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):d.top<0&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden")),d.x=d.left,d.y=d.top,this.setVScrollBar(d,0,0)&&(this.vscrollBar.style.right=this.container.clientWidth>window.innerWidth?"0px":"0px",this.vscrollBar.style[a.feat.cssPrefix+"Transition"]="",a(this.vscrollBar).animate().stop()),this.setHScrollBar(d,0,0)&&(this.container.clientHeight>window.innerHeight?this.hscrollBar.style.top=window.innerHeight-numOnly(this.hscrollBar.style.height)+"px":this.hscrollBar.style.bottom=numOnly(this.hscrollBar.style.height),this.hscrollBar.style[a.feat.cssPrefix+"Transition"]="",a(this.hscrollBar).animate().stop()),this.lastScrollInfo=d,this.hasMoved=!1,0===this.elementInfo.maxTop&&0===this.elementInfo.maxLeft&&this.lockBounce?this.scrollToTop(0):this.scrollerMoveCSS(this.lastScrollInfo,0),this.scrollerMoveCSS(this.lastScrollInfo,0)))},d.prototype.getCSSMatrix=function(b){var c,d,e;return this.androidFormsMode?(c=parseInt(b.style.marginTop,10),d=parseInt(b.style.marginLeft,10),isNaN(c)&&(c=0),isNaN(d)&&(d=0),{f:c,e:d}):e=a.getCssMatrix(b)},d.prototype.saveEventInfo=function(a){this.lastEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}},d.prototype.saveFirstEventInfo=function(a){this.firstEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}
},d.prototype.setVScrollBar=function(a,b,c){var d,e;return this.elementInfo.requiresVScrollBar?(d=parseFloat(this.elementInfo.bottomMargin/this.elementInfo.divHeight)*this.elementInfo.bottomMargin+"px",numOnly(d)>this.elementInfo.bottomMargin&&(d=this.elementInfo.bottomMargin+"px"),d!==this.vscrollBar.style.height&&(this.vscrollBar.style.height=d),e=this.elementInfo.bottomMargin-numOnly(this.vscrollBar.style.height)-(this.elementInfo.maxTop+a.y)/this.elementInfo.maxTop*(this.elementInfo.bottomMargin-numOnly(this.vscrollBar.style.height)),e>this.elementInfo.bottomMargin&&(e=this.elementInfo.bottomMargin),0>e&&(e=0),this.scrollbarMoveCSS(this.vscrollBar,{x:0,y:e},b,c),!0):!1},d.prototype.setHScrollBar=function(a,b,c){var d,e;return this.elementInfo.requiresHScrollBar?(d=parseFloat(this.elementInfo.rightMargin/this.elementInfo.divWidth)*this.elementInfo.rightMargin+"px",d!==this.hscrollBar.style.width&&(this.hscrollBar.style.width=d),e=this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width)-(this.elementInfo.maxLeft+a.x)/this.elementInfo.maxLeft*(this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width)),e>this.elementInfo.rightMargin&&(e=this.elementInfo.rightMargin),0>e&&(e=0),this.scrollbarMoveCSS(this.hscrollBar,{x:e,y:0},b,c),!0):!1},d.prototype.onTouchMove=function(b){var c,d,e,f,g,h,i,j,k,l,m;null!==this.currentScrollingObject&&(c=this.calculateMovement(b),this.calculateTarget(c),this.lastScrollInfo=c,this.moved||(a.trigger(this,"scrollstart",[this.el,{x:this.lastScrollInfo.top,y:this.lastScrollInfo.left}]),a.trigger(a.touchLayer,"scrollstart",[this.el,{x:this.lastScrollInfo.top,y:this.lastScrollInfo.left}]),this.elementInfo.requiresVScrollBar&&(this.vscrollBar.style.display="block"),this.elementInfo.requiresHScrollBar&&(this.hscrollBar.style.display="block")),this.moved=!0,this.refresh&&0===c.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):c.top<0&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden")),this.saveEventInfo(b),this.isScrolling===!1&&(this.isScrolling=!0,this.onScrollStart&&this.onScrollStart()),d=this.getCSSMatrix(this.el),this.lastScrollInfo.top=numOnly(d.f),this.lastScrollInfo.left=numOnly(d.e),this.recalculateDeltaY(this.lastScrollInfo),this.recalculateDeltaX(this.lastScrollInfo),this.checkYboundary(this.lastScrollInfo),this.elementInfo.hasHorScroll&&this.checkXboundary(this.lastScrollInfo),e=this.lastScrollInfo.y>0&&this.lastScrollInfo.deltaY>0,f=this.lastScrollInfo.y<-this.elementInfo.maxTop&&this.lastScrollInfo.deltaY<0,(e||f)&&(g=e?this.lastScrollInfo.y:-this.lastScrollInfo.y-this.elementInfo.maxTop,h=(this.container.clientHeight-g)/this.container.clientHeight,.5>h&&(h=.5),i=0,e&&this.lastScrollInfo.top>0||f&&this.lastScrollInfo.top<-this.elementInfo.maxTop?i=this.lastScrollInfo.top:f&&(i=-this.elementInfo.maxTop),j=this.lastScrollInfo.deltaY*h,k=Math.abs(this.lastScrollInfo.deltaY*h),1>k&&(j=e?1:-1),this.lastScrollInfo.y=i+j),this.elementInfo.hasHorScroll&&(e=this.lastScrollInfo.x>0&&this.lastScrollInfo.deltaX>0,f=this.lastScrollInfo.x<-this.elementInfo.maxLeft&&this.lastScrollInfo.deltaX<0,(e||f)&&(g=e?this.lastScrollInfo.x:-this.lastScrollInfo.x-this.elementInfo.maxLeft,h=(this.container.clientWidth-g)/this.container.clientWidth,.5>h&&(h=.5),i=0,e&&this.lastScrollInfo.left>0||f&&this.lastScrollInfo.left<-this.elementInfo.maxLeft?i=this.lastScrollInfo.left:f&&(i=-this.elementInfo.maxLeft),l=this.lastScrollInfo.deltaX*h,m=Math.abs(this.lastScrollInfo.deltaX*h),1>m&&(l=e?1:-1),this.lastScrollInfo.x=i+l)),(this.lockBounce||!this.refresh)&&(this.lastScrollInfo.x>0?this.lastScrollInfo.x=0:-1*this.lastScrollInfo.x>this.elementInfo.maxLeft&&(this.lastScrollInfo.x=-1*this.elementInfo.maxLeft),this.lastScrollInfo.y>0?this.lastScrollInfo.y=0:-1*this.lastScrollInfo.y>this.elementInfo.maxTop&&(this.lastScrollInfo.y=-1*this.elementInfo.maxTop)),this.scrollerMoveCSS(this.lastScrollInfo,0),this.setVScrollBar(this.lastScrollInfo,0,0),this.setHScrollBar(this.lastScrollInfo,0,0),this.refresh&&!this.preventPullToRefresh&&(!this.refreshTriggered&&this.lastScrollInfo.top>this.refreshHeight?(this.refreshTriggered=!0,this.setRefreshContent("Release to Refresh"),a.trigger(this,"refresh-trigger")):this.refreshTriggered&&this.lastScrollInfo.top<this.refreshHeight&&(this.refreshTriggered=!1,this.setRefreshContent("Pull to Refresh"),a.trigger(this,"refresh-cancel"))),this.infinite&&!this.infiniteTriggered&&Math.abs(this.lastScrollInfo.top)>this.el.clientHeight-this.container.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll")))},d.prototype.calculateMovement=function(a,b){var c={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0},d=b?this.firstEventInfo:this.lastEventInfo,e=b?a.pageX:a.touches[0].pageX,f=b?a.pageY:a.touches[0].pageY,g=b?a.time:a.timeStamp;return c.deltaY=this.elementInfo.hasVertScroll?f-d.pageY:0,c.deltaX=this.elementInfo.hasHorScroll?e-d.pageX:0,c.time=g,c.duration=g-d.time,c},d.prototype.calculateTarget=function(a){a.y=this.lastScrollInfo.y+a.deltaY,a.x=this.lastScrollInfo.x+a.deltaX,Math.abs(a.deltaY)>0&&(a.y+=(a.deltaY>0?1:-1)*this.elementInfo.divHeight*this.androidPerfHack),Math.abs(a.deltaX)>0&&(a.x+=(a.deltaX>0?1:-1)*this.elementInfo.divWidth*this.androidPerfHack)},d.prototype.checkYboundary=function(a){var b=this.container.clientHeight/2,c=this.elementInfo.maxTop+b;if(a.y>b)a.y=b;else{if(!(-a.y>c))return;a.y=-c}this.recalculateDeltaY(a)},d.prototype.checkXboundary=function(a){var b=this.container.clientWidth/2,c=this.elementInfo.maxLeft+b;if(a.x>b)a.x=b;else{if(!(-a.x>c))return;a.x=-c}this.recalculateDeltaX(a)},d.prototype.recalculateDeltaY=function(a){var c,b=Math.abs(a.deltaY);a.deltaY=a.y-a.top,c=Math.abs(a.deltaY),a.duration=a.duration*c/b},d.prototype.recalculateDeltaX=function(a){var c,b=Math.abs(a.deltaX);a.deltaX=a.x-a.left,c=Math.abs(a.deltaX),a.duration=a.duration*c/b},d.prototype.hideRefresh=function(c){var e,d=this;this.preventHideRefresh||(e=function(){d.setRefreshContent("Pull to Refresh"),a.trigger(d,"refresh-finish")},this.scrollerMoveCSS({x:0,y:0},b),c!==!1&&d.afEl.css3Animate?d.afEl.css3Animate({time:b+"ms",complete:e}):e(),this.refreshTriggered=!1)},d.prototype.setMomentum=function(a){var b=8e-4;a.speedY=this.divide(a.deltaY,a.duration),a.speedX=this.divide(a.deltaX,a.duration),a.absSpeedY=Math.abs(a.speedY),a.absSpeedX=Math.abs(a.speedX),a.absDeltaY=Math.abs(a.deltaY),a.absDeltaX=Math.abs(a.deltaX),a.absDeltaY>0?(a.deltaY+=(a.deltaY<0?-1:1)*a.absSpeedY*a.absSpeedY/(2*b),a.absDeltaY=Math.abs(a.deltaY),a.duration=a.absSpeedY/b,a.speedY=a.deltaY/a.duration,a.absSpeedY=Math.abs(a.speedY),(a.absSpeedY<100*b||a.absDeltaY<5)&&(a.deltaY=a.absDeltaY=a.duration=a.speedY=a.absSpeedY=0)):a.absDeltaX?(a.deltaX+=(a.deltaX<0?-1:1)*a.absSpeedX*a.absSpeedX/(2*b),a.absDeltaX=Math.abs(a.deltaX),a.duration=a.absSpeedX/b,a.speedX=a.deltaX/a.duration,a.absSpeedX=Math.abs(a.speedX),(a.absSpeedX<100*b||a.absDeltaX<5)&&(a.deltaX=a.absDeltaX=a.duration=a.speedX=a.absSpeedX=0)):a.duration=0},d.prototype.onTouchEnd=function(){var d,e,f,g;null!==this.currentScrollingObject&&this.moved&&(this.finishScrollingObject=this.currentScrollingObject,this.currentScrollingObject=null,d=this.calculateMovement(this.lastEventInfo,!0),this.androidFormsMode||this.setMomentum(d),this.calculateTarget(d),e=this.getCSSMatrix(this.el),d.top=numOnly(e.f),d.left=numOnly(e.e),this.checkYboundary(d),this.elementInfo.hasHorScroll&&this.checkXboundary(d),f=!this.preventPullToRefresh&&(d.top>this.refreshHeight||d.y>this.refreshHeight),this.fireRefreshRelease(f,d.top>0),this.refresh&&f?(d.y=this.refreshHeight,d.duration=b):d.y>=0?(d.y=0,d.top>=0&&(d.duration=b)):(-d.y>this.elementInfo.maxTop||0===this.elementInfo.maxTop)&&(d.y=-this.elementInfo.maxTop,-d.top>this.elementInfo.maxTop&&(d.duration=b)),this.elementInfo.hasHorScroll&&(d.x>=0?(d.x=0,d.left>=0&&this.refresh&&(d.duration=b)):(-d.x>this.elementInfo.maxLeft||0===this.elementInfo.maxLeft)&&(d.x=-this.elementInfo.maxLeft,-d.left>this.elementInfo.maxLeft&&this.refresh&&(d.duration=b))),(d.x===d.left&&d.y===d.top||this.androidFormsMode)&&(d.duration=0),this.scrollerMoveCSS(d,d.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setVScrollBar(d,d.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setHScrollBar(d,d.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setFinishCalback(d.duration),this.infinite&&!this.infiniteTriggered&&Math.abs(d.y)>=this.el.clientHeight-this.container.clientHeight&&(g=this,setTimeout(function(){g.infiniteTriggered=!0,a.trigger(g,"infinite-scroll")},d.duration-50)))},d.prototype.setFinishCalback=function(b){var c=this;this.scrollingFinishCB=setTimeout(function(){c.hideScrollbars(),a.trigger(a.touchLayer,"scrollend",[c.el]),a.trigger(c,"scrollend",[c.el]),c.isScrolling=!1,c.elementInfo=null,c.infinite&&c.infiniteTriggered&&a.trigger(c,"infinite-scroll-end")},b)},d.prototype.startFormsMode=function(){if(!this.blockFormsFix){var b=this.getCSSMatrix(this.el);this.refreshSafeKeep=this.refresh,this.refresh=!1,this.androidFormsMode=!0,this.el.style[a.feat.cssPrefix+"Transform"]="none",this.el.style[a.feat.cssPrefix+"Transition"]="none",this.el.style[a.feat.cssPrefix+"Perspective"]="none",this.scrollerMoveCSS({x:numOnly(b.e),y:numOnly(b.f)},0),this.container.style[a.feat.cssPrefix+"Perspective"]="none",this.container.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible",this.vscrollBar&&(this.vscrollBar.style[a.feat.cssPrefix+"Transform"]="none",this.vscrollBar.style[a.feat.cssPrefix+"Transition"]="none",this.vscrollBar.style[a.feat.cssPrefix+"Perspective"]="none",this.vscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible"),this.hscrollBar&&(this.hscrollBar.style[a.feat.cssPrefix+"Transform"]="none",this.hscrollBar.style[a.feat.cssPrefix+"Transition"]="none",this.hscrollBar.style[a.feat.cssPrefix+"Perspective"]="none",this.hscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible")}},d.prototype.stopFormsMode=function(){if(!this.blockFormsFix){var b=this.getCSSMatrix(this.el);this.refresh=this.refreshSafeKeep,this.androidFormsMode=!1,this.el.style[a.feat.cssPrefix+"Perspective"]=1e3,this.el.style.marginTop=0,this.el.style.marginLeft=0,this.el.style[a.feat.cssPrefix+"Transition"]="0ms linear",this.scrollerMoveCSS({x:numOnly(b.e),y:numOnly(b.f)},0),this.container.style[a.feat.cssPrefix+"Perspective"]=1e3,this.container.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden",this.vscrollBar&&(this.vscrollBar.style[a.feat.cssPrefix+"Perspective"]=1e3,this.vscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden"),this.hscrollBar&&(this.hscrollBar.style[a.feat.cssPrefix+"Perspective"]=1e3,this.hscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden")}},d.prototype.scrollerMoveCSS=function(b,c,d){var e,f;c||(c=0),d||(d="linear"),c=numOnly(c),e=this,this.el&&this.el.style&&(this.eventsActive&&(this.androidFormsMode?(this.el.style.marginTop=Math.round(b.y)+"px",this.el.style.marginLeft=Math.round(b.x)+"px"):(f={x:b.x,y:b.y,duration:c,easing:"easeOutSine"},e.initScrollProgress&&(f.update=function(b){a.trigger(e,"scroll",[b]),a.trigger(a.touchLayer,"scroll",[b])}),a(this.el).animate(f).start())),this.logPos(b.x,b.y))},d.prototype.logPos=function(a,b){var c;c=this.elementInfo?{h:this.elementInfo.bottomMargin,w:this.elementInfo.rightMargin}:this.getViewportSize(),this.loggedPcentX=this.divide(a,this.el.clientWidth-c.w),this.loggedPcentY=this.divide(b,this.el.clientHeight-c.h),this.scrollTop=b,this.scrollLeft=a},d.prototype.scrollbarMoveCSS=function(b,c,d,e){d||(d=0),e||(e="linear"),b&&b.style&&(this.androidFormsMode?(b.style.marginTop=Math.round(c.y)+"px",b.style.marginLeft=Math.round(c.x)+"px"):a(b).animate({x:c.x,y:c.y,duration:d,easing:"easeOutSine"}).start())},d.prototype.scrollTo=function(a,b){b||(b=0),this.scrollerMoveCSS(a,b)},d.prototype.scrollBy=function(a,b){var c=this.getCSSMatrix(this.el),d=numOnly(c.f),e=numOnly(c.e);this.scrollTo({y:d-a.y,x:e-a.x},b)},d.prototype.scrollToBottom=function(a){this.scrollTo({y:-1*(this.el.clientHeight-this.container.clientHeight),x:0},a)},d.prototype.scrollToTop=function(a){this.scrollTo({x:0,y:0},a)},h}()}(af),function(a){"use strict";function b(b,c,d){return d===!0&&(this.getAttribute("multiple")||a.selectBox.updateMaskValue(this.parentNode.id,this.text,this.value),this.parentNode.value=this.value),d}function c(b,c,d){return this.options[d]&&(this.getAttribute("multiple")||a.selectBox.updateMaskValue(this.linker,this.options[d].value,this.options[d].text),this.value=this.options[d].value),d}function d(b){var c=b.target;a(c.linker).remove(),delete c.linker,b.stopPropagation()}a.selectBox={scroller:null,currLinker:null,getOldSelects:function(e){var f,g,h,i,j,k,l;if(a.os.android&&!a.os.androidICS){if(!a.fn.scroller)return window.alert("This library requires af.scroller"),void 0;if(f=e&&document.getElementById(e)?document.getElementById(e):document,!f)return window.alert("Could not find container element for af.selectBox "+e),void 0;for(g=f.getElementsByTagName("select"),h=this,i=0;i<g.length;i++){for(j=g[i],j.style.display="none",k=a.create("div",{className:"afFakeSelect"}),k.get(0).linker=g[i],j.linker=k.get(0),k.insertAfter(g[i]),j.watch("selectedIndex",c),l=0;l<j.options.length;l++)j.options[l].watch("selected",b),j.options[l].selected&&k.html(j.options[l].text);a(j).one("destroy",d)}h.createHtml()}},updateDropdown:function(a){if(a){for(var b=0;b<a.options.length;b++)a.options[b].selected&&(a.linker.innerHTML=a.options[b].text);a=null}},initDropDown:function(c){var f,g,h,i,k,l,m,n,o,q;if(!c.disabled&&c&&c.options&&0!==c.options.length){for(f=0,g=a("#afSelectBoxfix"),g.html("<ul></ul>"),h=g.find("ul"),i=0;i<c.options.length;i++)c.options[i].watch("selected",b),k=c.options[i].selected?"selected":"",k&&(f=i+1),l=a.create("li",{html:c.options[i].text,className:k}),l.data("ind",i),h.append(l);a("#afModalMask").show();try{f>0&&"multiple"!==c.getAttribute("multiple")&&(m=0,n=numOnly(h.find("li").computedStyle("height")),o=numOnly(a("#afSelectBoxContainer").computedStyle("height")),f*n>=o&&(m=(f-1)*-n),this.scroller.scrollTo({x:0,y:m}))}catch(p){console.log("error init dropdown"+p)}q="block"===a("#afSelectClose").css("display")?numOnly(a("#afSelectClose").height()):0,a("#afSelectWrapper").height(numOnly(a("#afSelectBoxContainer").height())-q+"px")}},updateMaskValue:function(b,c,d){a(b).html(d)},setDropDownValue:function(b,c){var d,e;b&&(d=a(b),c=parseInt(c,10),b.getAttribute("multiple")?(e=a("#afSelectBoxfix li:nth-child("+(c+1)+")"),e.hasClass("selected")?e.removeClass("selected"):e.addClass("selected")):(b.selectedIndex=c,d.find("option").prop("selected",!1),d.find("option:nth-child("+(c+1)+")").prop("selected",!0),this.scroller.scrollTo({x:0,y:0}),this.hideDropDown()),a(b).trigger("change"),b=null)},hideDropDown:function(){a("#afModalMask").hide(),a("#afSelectBoxfix").html("")},createHtml:function(){var b=this;document.getElementById("afSelectBoxfix")||a(document).ready(function(){var c,d,e,f,g,h;a(document).on("click",".afFakeSelect",function(){this.linker.disabled||(b.currLinker=this,"multiple"===this.linker.getAttribute("multiple")?a("#afSelectClose").show():a("#afSelectClose").hide(),b.initDropDown(this.linker))}),c=a.create("div",{id:"afSelectBoxContainer"}),d=a.create("div",{id:"afSelectBoxfix"}),e=a.create("div",{id:"afSelectWrapper"}),e.css("position","relative"),e.append(d),f=a.create("div",{id:"afSelectClose",html:"<a id='afSelectDone'>Done</a> <a id='afSelectCancel'>Cancel</a>"}),g=a.create("div",{id:"afModalMask"}),h=a("#afui"),c.prepend(f).append(e),g.append(c),h.length>0?h.append(g):document.body.appendChild(g.get(0)),b.scroller=a.query("#afSelectBoxfix").scroller({scroller:!1,verticalScroll:!0,vScrollCSS:"afselectscrollBarV",hasParent:!0}),a("#afModalMask").on("click",function(c){var d=a(c.target);0===d.closest("#afSelectBoxContainer").length&&b.hideDropDown()}),a("#afSelectBoxfix").on("click","li",function(c){var d=a(c.target);b.setDropDownValue(b.currLinker.linker,d.data("ind"))}),a("#afSelectBoxContainer").on("click","a",function(c){if("afSelectCancel"===c.target.id)return b.hideDropDown();var d=a(b.currLinker.linker);return d.find("option").prop("selected",!1),a("#afSelectBoxfix li").each(function(){var f,e=a(this);e.hasClass("selected")&&(f=parseInt(e.data("ind"),10),d.find("option:nth-child("+(f+1)+")").prop("selected",!0),b.currLinker.innerHTML=e.html())}),b.hideDropDown(),c.stopPropagation(),c.preventDefault(),!1})})}},HTMLElement.prototype.watch||(HTMLElement.prototype.watch=function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&(HTMLElement.defineProperty?HTMLElement.defineProperty(this,a,{get:e,set:f,enumerable:!1,configurable:!0}):HTMLElement.prototype.__defineGetter__&&HTMLElement.prototype.__defineSetter__&&(HTMLElement.prototype.__defineGetter__.call(this,a,e),HTMLElement.prototype.__defineSetter__.call(this,a,f)))}),HTMLElement.prototype.unwatch||(HTMLElement.prototype.unwatch=function(a){var b=this[a];delete this[a],this[a]=b})}(af),function(a){"use strict";function d(a){return"tagName"in a?a:a.parentNode}function e(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function g(){b.last&&Date.now()-b.last>=f&&(b.el.trigger("longTap"),b={})}var c,h,b={},f=750;a(document).ready(function(){var i;a(document.body).bind("touchstart",function(e){if(e.originalEvent&&(e=e.originalEvent),e.touches&&0!==e.touches.length){var j=Date.now(),k=j-(b.last||j);e.touches&&0!==e.touches.length&&(b.el=a(d(e.touches[0].target)),c&&clearTimeout(c),b.x1=e.touches[0].pageX,b.y1=e.touches[0].pageY,b.x2=b.y2=0,k>0&&250>=k&&(b.isDoubleTap=!0),b.last=j,h=setTimeout(g,f),a.ui.useAutoPressed&&!b.el.data("ignore-pressed")&&b.el.addClass("pressed"),i&&a.ui.useAutoPressed&&!i.data("ignore-pressed")&&i[0]!==b.el[0]&&i.removeClass("pressed"),i=b.el)}}).bind("touchmove",function(a){a.originalEvent&&(a=a.originalEvent),b.x2=a.touches[0].pageX,b.y2=a.touches[0].pageY,clearTimeout(h)}).bind("touchend",function(d){d.originalEvent&&(d=d.originalEvent),b.el&&(a.ui.useAutoPressed&&!b.el.data("ignore-pressed")&&b.el.removeClass("pressed"),b.isDoubleTap?(b.el.trigger("doubleTap"),b={}):b.x2>0||b.y2>0?((Math.abs(b.x1-b.x2)>30||Math.abs(b.y1-b.y2)>30)&&b.el.trigger("swipe")&&b.el.trigger("swipe"+e(b.x1,b.x2,b.y1,b.y2)),b.x1=b.x2=b.y1=b.y2=b.last=0):"last"in b&&(b.el.trigger("tap"),c=setTimeout(function(){c=null,b.el&&b.el.trigger("singleTap"),b={}},250)))}).bind("touchcancel",function(){b.el&&a.ui.useAutoPressed&&!b.el.data("ignore-pressed")&&b.el.removeClass("pressed"),b={},clearTimeout(h)})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(af),function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,m;a.touchLayer=function(b){return a.touchLayer=new m(b),a.touchLayer},b=["input","select","textarea"],c=["button","radio","checkbox","range","date"],d=a.os.ios,e=a.os.blackberry,f=a.os.blackberry||a.os.fennec||a.os.android&&!a.os.chrome,g=a.os.ios&&!a.os.ios7,h=.97,i=2,j=!1,k=!1,m=function(b){this.clearTouchVars(),b.addEventListener("touchstart",this,!1),b.addEventListener("touchmove",this,!1),b.addEventListener("touchend",this,!1),b.addEventListener("click",this,!1),b.addEventListener("focusin",this,!1),document.addEventListener("scroll",this,!1),window.addEventListener("resize",this,!1),window.addEventListener("orientationchange",this,!1),this.layer=b,this.scrollEndedProxy_=a.proxy(this.scrollEnded,this),this.exitEditProxy_=a.proxy(this.exitExit,this,[]),this.launchFixUIProxy_=a.proxy(this.launchFixUI,this);var c=this;this.scrollTimeoutExpireProxy_=function(){c.scrollTimeout_=null,c.scrollTimeoutEl_.addEventListener("scroll",c.scrollEndedProxy_,!1)},this.retestAndFixUIProxy_=function(){a.os.android&&!a.os.chrome&&(c.layer.style.height="100%"),a.asap(c.testAndFixUI,c,arguments)},document.addEventListener("click",function(a){return k?(a.preventDefault(),a.stopPropagation(),!1):(void 0!==a.clientX&&null!==c.lastTouchStartX&&2>Math.abs(c.lastTouchStartX-a.clientX)&&2>Math.abs(c.lastTouchStartY-a.clientY)&&(a.preventDefault(),a.stopPropagation()),void 0)},!0),a.bind(this,"scrollstart",function(b){c.isScrolling=!0,c.scrollingEl_=b,a.feat.nativeTouchScroll||(c.scrollerIsScrolling=!0),c.fireEvent("UIEvents","scrollstart",b,!1,!1)}),a.bind(this,"scrollend",function(b){c.isScrolling=!1,a.feat.nativeTouchScroll||(c.scrollerIsScrolling=!1),c.fireEvent("UIEvents","scrollend",b,!1,!1)}),this.hideAddressBar(0,1),this.launchFixUI(5)},m.prototype={dX:0,dY:0,cX:0,cY:0,touchStartX:null,touchStartY:null,layer:null,scrollingEl_:null,scrollTimeoutEl_:null,scrollTimeout_:null,reshapeTimeout_:null,scrollEndedProxy_:null,exitEditProxy_:null,launchFixUIProxy_:null,reHideAddressBarTimeout_:null,retestAndFixUIProxy_:null,panElementId:"header",blockClicks:!1,allowDocumentScroll_:!1,ignoreNextResize_:!1,blockPossibleClick_:!1,isScrolling:!1,isScrollingVertical_:!1,wasPanning_:!1,isPanning_:!1,isFocused_:!1,justBlurred_:!1,requiresNativeTap:!1,holdingReshapeType_:null,trackingClick:!1,scrollerIsScrolling:!1,handleEvent:function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onTouchEnd(a);break;case"click":this.onClick(a);break;case"blur":this.onBlur(a);break;case"scroll":this.onScroll(a);break;case"orientationchange":this.onOrientationChange(a);break;case"resize":this.onResize(a);break;case"focusin":this.onFocusIn(a)}},launchFixUI:function(a){return a||(a=i),null===this.reHideAddressBarTimeout_?this.testAndFixUI(0,a):void 0},resetFixUI:function(){this.reHideAddressBarTimeout_&&clearTimeout(this.reHideAddressBarTimeout_),this.reHideAddressBarTimeout_=null},testAndFixUI:function(b,c){var d=this.getReferenceHeight(),e=this.getCurrentHeight();return d===e||d>e*h&&e>d*h?(a.os.android&&this.resetFixUI(),!1):(this.hideAddressBar(b,c),!0)},hideAddressBar:function(b,c){var d,e;if(!a.ui||!a.ui.isIntel)return b>=c?(this.resetFixUI(),void 0):(a.os.desktop||a.os.kindle?this.layer.style.height="100%":a.os.android?(window.scrollTo(1,1),this.layer.style.height=this.isFocused_||window.innerHeight>=window.outerHeight?window.innerHeight+"px":window.outerHeight+"px",d=this,e=b+1,this.reHideAddressBarTimeout_=setTimeout(d.retestAndFixUIProxy_,250*e,e,c)):this.isFocused_||(document.documentElement.style.height="5000px",window.scrollTo(0,0),document.documentElement.style.height=window.innerHeight+"px",this.layer.style.height=window.innerHeight+"px"),void 0)},getReferenceHeight:function(){return window.innerHeight},getCurrentHeight:function(){return a.os.android?window.innerHeight:numOnly(document.documentElement.style.height)},onOrientationChange:function(){var e,c=this,d=!1;this.focusedElement&&(d=!0,this.focusedElement.blur()),!this.holdingReshapeType_&&this.reshapeTimeout_?this.fireReshapeEvent("orientationchange"):this.previewReshapeEvent("orientationchange"),a.os.android&&a.os.chrome&&(this.layer.style.height="100%",e=d?600:0,setTimeout(function(){c.hideAddressBar(0,1)},e))},onResize:function(){return this.ignoreNextResize_?(this.ignoreNextResize_=!1,void 0):(this.launchFixUI()&&this.reshapeAction(),void 0)},onClick:function(e){var g,h,i,f=e.target&&void 0!==e.target.tagName?e.target.tagName.toLowerCase():"";-1===b.indexOf(f)||this.isFocused_&&e.target===this.focusedElement?a.os.blackberry10&&this.isFocused_&&this.focusedElement.blur():(g=e.target&&void 0!==e.target.type?e.target.type.toLowerCase():"",h=-1!==c.indexOf(g),h?this.isFocused_=!1:(this.isFocused_&&this.focusedElement.removeEventListener("blur",this,!1),this.focusedElement=e.target,this.focusedElement.addEventListener("blur",this,!1),this.isFocused_||this.justBlurred_||(a.trigger(this,"enter-edit",[e.target]),a.os.ios?(i=this,setTimeout(function(){i.fireReshapeEvent("enter-edit")},300)):this.previewReshapeEvent("enter-edit")),this.isFocused_=!0),this.justBlurred_=!1,this.allowDocumentScroll_=!0,d&&e.target.focus())},previewReshapeEvent:function(a){var b=this;this.reshapeTimeout_=setTimeout(function(){b.fireReshapeEvent(a),b.reshapeTimeout_=null,b.holdingReshapeType_=null},750),this.holdingReshapeType_=a},fireReshapeEvent:function(b){a.trigger(this,"reshape"),a.trigger(this,b?b+"-reshape":"unknown-reshape")},reshapeAction:function(){this.reshapeTimeout_?(clearTimeout(this.reshapeTimeout_),this.fireReshapeEvent(this.holdingReshapeType_),this.holdingReshapeType_=null,this.reshapeTimeout_=null):this.previewReshapeEvent()},onFocusIn:function(a){this.isFocused_||this.onClick(a)},onBlur:function(b){a.os.android&&b.target===window||(this.isFocused_=!1,this.focusedElement&&this.focusedElement.removeEventListener("blur",this,!1),this.focusedElement=null,this.justBlurred_=!0,a.asap(this.exitEditProxy_,this,[b.target]))},exitExit:function(b){if(this.justBlurred_=!1,!this.isFocused_)if(a.trigger(this,"exit-edit",[b]),this.allowDocumentScroll_=!1,a.os.ios){var c=this;setTimeout(function(){c.fireReshapeEvent("exit-edit")},300)}else this.previewReshapeEvent("exit-edit")},onScroll:function(a){this.allowDocumentScroll_||this.isPanning_||a.target!==document||(this.allowDocumentScroll_=!0,this.wasPanning_?(this.wasPanning_=!1,setTimeout(this.launchFixUIProxy_,2e3,[i])):this.launchFixUI())},onTouchStart:function(c){var d,e;if(this.dX=c.touches[0].pageX,this.dY=c.touches[0].pageY,this.lastTimestamp=c.timeStamp,this.lastTouchStartX=this.lastTouchStartY=null,a.os.ios){if(j===c.touches[0].identifier)return k=!0,c.preventDefault(),j=!1,!1;j=c.touches[0].identifier,k=!1}return this.scrollerIsScrolling?(this.moved=!0,this.scrollerIsScrolling=!1,c.preventDefault(),!1):(this.trackingClick=!0,(g||a.feat.nativeTouchScroll)&&this.checkDOMTree(c.target,this.layer),this.isScrolling&&(null!==this.scrollTimeout_?(clearTimeout(this.scrollTimeout_),this.scrollTimeout_=null,this.scrollTimeoutEl_!==this.scrollingEl_?this.scrollEnded(!1):this.blockPossibleClick_=!0):this.scrollTimeoutEl_&&(this.scrollEnded(!0),this.blockPossibleClick_=!0)),d=a.os.android&&c&&c.target&&c.target.getAttribute&&"ignore"===c.target.getAttribute("data-touchlayer"),d||this.isFocused_&&!a.os.blackberry10?(this.requiresNativeTap=!0,this.allowDocumentScroll_=!0):f&&c.target&&void 0!==c.target.tagName?(e=c.target.tagName.toLowerCase(),-1!==b.indexOf(e)&&(this.requiresNativeTap=!0)):c.target&&void 0!==c.target.tagName&&"input"===c.target.tagName.toLowerCase()&&"range"===c.target.type&&(this.requiresNativeTap=!0),a.os.chrome||a.os.fennec||(this.isPanning_||this.requiresNativeTap?this.isScrollingVertical_&&this.demandVerticalScroll():(this.isScrolling&&!a.feat.nativeTouchScroll||!this.isScrolling)&&c.preventDefault()),void 0)},demandVerticalScroll:function(){var b,c,a=this.scrollingEl_.scrollTop<=0;a?this.scrollingEl_.scrollTop=1:(b=this.scrollingEl_.scrollTop+this.scrollingEl_.clientHeight,c=b>=this.scrollingEl_.scrollHeight,c&&(this.scrollingEl_.scrollTop=this.scrollingEl_.scrollHeight-this.scrollingEl_.clientHeight-1))},ignoreScrolling:function(a){return void 0===a.scrollWidth||void 0===a.clientWidth?!0:void 0===a.scrollHeight||void 0===a.clientHeight?!0:!1},allowsVerticalScroll:function(a,b){var c=b.overflowY;return"scroll"===c?!0:"auto"===c&&a.scrollHeight>a.clientHeight?!0:!1},allowsHorizontalScroll:function(a,b){var c=b.overflowX;return"scroll"===c?!0:"auto"===c&&a.scrollWidth>a.clientWidth?!0:!1},checkDOMTree:function(b,c){var d,e;if(g&&this.panElementId===b.id)return this.isPanning_=!0,void 0;if(a.feat.nativeTouchScroll){if(this.ignoreScrolling(b))return;if(d=window.getComputedStyle(b),this.allowsVerticalScroll(b,d))return this.isScrollingVertical_=!0,this.scrollingEl_=b,this.isScrolling=!0,void 0;this.allowsHorizontalScroll(b,d)&&(this.isScrollingVertical_=!1,this.scrollingEl_=null,this.isScrolling=!0)}e=b===c,!e&&b.parentNode&&this.checkDOMTree(b.parentNode,c)},scrollEnded:function(a){null!==this.scrollTimeoutEl_&&(a&&this.scrollTimeoutEl_.removeEventListener("scroll",this.scrollEndedProxy_,!1),this.fireEvent("UIEvents","scrollend",this.scrollTimeoutEl_,!1,!1),this.scrollTimeoutEl_=null)},onTouchMove:function(b){var c=this.moved;return this.moved=!0,e&&(this.cY=b.touches[0].pageY-this.dY,this.cX=b.touches[0].pageX-this.dX),this.isPanning_?void 0:(this.isScrolling&&(c||this.fireEvent("UIEvents","scrollstart",this.scrollingEl_,!1,!1),this.speedY=(this.lastY-b.touches[0].pageY)/(b.timeStamp-this.lastTimestamp),this.lastY=b.touches[0].pageY,this.lastX=b.touches[0].pageX,this.lastTimestamp=b.timeStamp),a.os.blackberry10?void 0:(this.isScrolling&&a.feat.nativeTouchScroll||b.preventDefault(),void 0))},onTouchEnd:function(b){var d,f,c=this.moved;if(e&&(c=c&&!(Math.abs(this.cX)<10&&Math.abs(this.cY)<10)),a.os.ios&&this.requiresNativeTap||(this.allowDocumentScroll_=!1),this.isPanning_&&c)this.wasPanning_=!0;else if(c||this.requiresNativeTap)c&&(this.isScrolling&&(this.scrollTimeoutEl_=this.scrollingEl_,Math.abs(this.speedY)<.01?this.scrollEnded(!1):this.scrollTimeout_=setTimeout(this.scrollTimeoutExpireProxy_,30)),this.requiresNativeTap&&(this.isFocused_||a.trigger(this,"cancel-enter-edit",[b.target])));else{if(this.scrollerIsScrolling=!1,!this.trackingClick)return;b.preventDefault(),this.blockClicks||this.blockPossibleClick_||(d=b.target,f=b.changedTouches?b.changedTouches[0]:b.touches[0],3===d.nodeType&&(d=d.parentNode),this.fireEvent("Event","click",d,!0,b.mouseToTouch,f[0]),this.lastTouchStartX=this.dX,this.lastTouchStartY=this.dY)}a.os.blackberry10&&(this.lastTouchStartX=this.dX,this.lastTouchStartY=this.dY),this.clearTouchVars()},clearTouchVars:function(){this.speedY=this.lastY=this.cY=this.cX=this.dX=this.dY=0,this.moved=!1,this.isPanning_=!1,this.isScrolling=!1,this.isScrollingVertical_=!1,this.requiresNativeTap=!1,this.blockPossibleClick_=!1,this.trackingClick=!1},fireEvent:function(b,c,d,e,f,g){var h=document.createEvent(b);h.initEvent(c,e,!0),g&&a.each(g,function(a,b){h.key=b}),f&&(h.mouseToTouch=!0),d.dispatchEvent(h)}}}(af),function(a){"use strict";var b,c,d;a.fn.popup=function(a){return new c(this[0],a)},b=[],c=function(){var c=function(c,d){if(this.container="string"==typeof c||c instanceof String?document.getElementById(c):c,!this.container)return window.alert("Error finding container for popup "+c),void 0;try{("string"==typeof d||"number"==typeof d)&&(d={message:d,cancelOnly:"true",cancelText:"OK"}),this.id=d.id=d.id||a.uuid(),this.addCssClass=d.addCssClass?d.addCssClass:"",this.title=d.suppressTitle?"":d.title||"Alert",this.message=d.message||"",this.cancelText=d.cancelText||"Cancel",this.cancelCallback=d.cancelCallback||function(){},this.cancelClass=d.cancelClass||"button",this.doneText=d.doneText||"Done",this.doneCallback=d.doneCallback||function(){},this.doneClass=d.doneClass||"button",this.cancelOnly=d.cancelOnly||!1,this.onShow=d.onShow||function(){},this.autoCloseDone=void 0!==d.autoCloseDone?d.autoCloseDone:!0,b.push(this),1===b.length&&this.show()}catch(e){console.log("error adding popup "+e)}};return c.prototype={id:null,addCssClass:null,title:null,message:null,cancelText:null,cancelCallback:null,cancelClass:null,doneText:null,doneCallback:null,doneClass:null,cancelOnly:!1,onShow:null,autoCloseDone:!0,supressTitle:!1,show:function(){var d,b=this,c="<div id='"+this.id+"' class='afPopup hidden "+this.addCssClass+"'>"+"<header>"+this.title+"</header>"+"<div>"+this.message+"</div>"+"<footer>"+"<a href='javascript:;' class='"+this.cancelClass+"' id='cancel'>"+this.cancelText+"</a>"+"<a href='javascript:;' class='"+this.doneClass+"' id='action'>"+this.doneText+"</a>"+"<div style='clear:both'></div>"+"</footer>"+"</div>";a(this.container).append(a(c)),d=a.query("#"+this.id),d.bind("close",function(){b.hide()
}),this.cancelOnly&&(d.find("A#action").hide(),d.find("A#cancel").addClass("center")),d.find("A").each(function(){var c=a(this);c.bind("click",function(a){"cancel"===c.attr("id")?(b.cancelCallback.call(b.cancelCallback,b),b.hide()):(b.doneCallback.call(b.doneCallback,b),b.autoCloseDone&&b.hide()),a.preventDefault()})}),b.positionPopup(),a.blockUI(.5),d.bind("orientationchange",function(){b.positionPopup()}),d.find("header").show(),d.find("footer").show(),setTimeout(function(){d.removeClass("hidden"),b.onShow(b)},50)},hide:function(){var b=this;a.query("#"+b.id).addClass("hidden"),a.unblockUI(),a.os.ie||a.os.android?b.remove():setTimeout(function(){b.remove()},250)},remove:function(){var c=this,d=a.query("#"+c.id);d.unbind("close"),d.find("BUTTON#action").unbind("click"),d.find("BUTTON#cancel").unbind("click"),d.unbind("orientationchange").remove(),b.splice(0,1),b.length>0&&b[0].show()},positionPopup:function(){var b=a.query("#"+this.id);b.css("top",window.innerHeight/2.5+window.pageYOffset-b[0].clientHeight/2+"px"),b.css("left",window.innerWidth/2-b[0].clientWidth/2+"px")}},c}(),d=!1,a.blockUI=function(b){d||(b=b?" style='opacity:"+b+";'":"",a.query("BODY").prepend(a("<div id='mask'"+b+"></div>")),a.query("BODY DIV#mask").bind("touchstart",function(a){a.preventDefault()}),a.query("BODY DIV#mask").bind("touchmove",function(a){a.preventDefault()}),d=!0)},a.unblockUI=function(){d=!1,a.query("BODY DIV#mask").unbind("touchstart"),a.query("BODY DIV#mask").unbind("touchmove"),a("BODY DIV#mask").remove()}}(af),function(a){"use strict";var g,h,i,c=window.location.pathname+window.location.search,d=window.location.hash,e=d,f=function(){function d(){if(b.useOSThemes&&(a("#afui").removeClass("ios,ios7,win8,tizen,bb,android,light,dark"),a.os.android?a("#afui").addClass("android"):a.os.ie?(a("#afui").addClass("win8"),a("head").append(a.create("script",{src:"plugins/af.8tiles.js"}))):a.os.blackberry||a.os.blackberry10||a.os.playbook?(a("#afui").addClass("bb"),b.backButtonText="Back"):a.os.ios7?a("#afui").addClass("ios7"):a.os.ios?a("#afui").addClass("ios"):a.os.tizen&&a("#afui").addClass("tizen")),a.os.ios){a("head").find("#iosBlurrHack").remove();var c="-webkit-backface-visibility: hidden;";c+="-webkit-perspective:1000;",a("head").append("<style id='iosBlurrHack'>#afui .y-scroll > *, #afui .x-scroll > * {"+c+"}</style>")}else a.os.anroid&&!a.os.androidICS?b.transitionTime="150ms":a.os.fennec&&b.ready(function(){var b=numOnly(a("#header").height())+numOnly(a("#navbar").height());a("#content").css("height",window.innerHeight-b)})}var c,b=this;this.availableTransitions={},this.availableTransitions["default"]=this.availableTransitions.none=this.noTransition,("function"==typeof define&&define.amd||"undefined"!=typeof module&&module.exports)&&(b.autoLaunch=!1),1===a("#afui").length&&d(),c=function(){var e,c=document.getElementById("afui");if(null===c){for(c=document.createElement("div"),c.id="afui",e=document.body;e&&e.firstChild;)c.appendChild(e.firstChild);a(document.body).prepend(c)}b.isIntel="intel"in window&&window.intel&&window.intel.xdk&&"app"in window.intel.xdk,a.os.supportsTouch&&a.touchLayer(c),d()},"complete"===document.readyState||"loaded"===document.readyState?(c(),b.init?b.autoBoot():a(window).one("afui:init",function(){b.autoBoot()})):a(document).ready(function(){c(),b.init?b.autoBoot():a(window).one("afui:init",function(){b.autoBoot()})},!1),"intel"in window||(window.intel={xdk:{}},window.intel.xdk.webRoot=""),window.addEventListener("popstate",function(){var a,c;b.useInternalRouting&&(a=b.getPanelId(document.location.hash),c=document.location.href.replace(document.location.origin+"/",""),"#"!==c&&(""===a&&1===b.history.length&&(a="#"+b.firstDiv.id),""!==a&&0!==af(a).filter(".panel").length&&a!=="#"+b.activeDiv.id&&b.goBack()))},!1)};f.prototype={init:!1,transitionTime:"230ms",showLoading:!0,loadingText:"Loading Content",loadContentQueue:[],isIntel:!1,titlebar:"",navbar:"",header:"",viewportContainer:"",remotePages:{},history:[],homeDiv:"",screenWidth:"",content:"",modalWindow:"",customFooter:!1,defaultFooter:"",defaultHeader:null,customMenu:!1,customAside:!1,defaultAside:"",defaultMenu:"",_readyFunc:null,doingTransition:!1,passwordBox:a.passwordBox?new a.passwordBox:!1,selectBox:a.selectBox?a.selectBox:!1,ajaxUrl:"",transitionType:"slide",scrollingDivs:{},firstDiv:"",hasLaunched:!1,isLaunching:!1,launchCompleted:!1,activeDiv:"",customClickHandler:"",menuAnimation:null,togglingSideMenu:!1,sideMenuWidth:"200px",handheldMinWidth:"768",trimBackButtonText:!0,useOSThemes:!0,lockPageBounce:!1,animateHeaders:!0,useAutoPressed:!0,horizontalScroll:!1,_currentHeaderID:"defaultHeader",useInternalRouting:!0,autoBoot:function(){this.hasLaunched=!0;var b=this;this.autoLaunch&&(this.isIntel?a(document).one("intel.xdk.device.ready",function(){b.launch()}):this.launch())},css3animate:function(b,c){return b=a(b),b.css3Animate(c)},dispatchPanelEvent:function(a,b){if("string"==typeof a&&window[a])return window[a](b);if(-1!==a.indexOf(".")){var c=window,d=a.split("."),e=d.length,f=0;for(f;e-1>f;f++)if(c=c[d[f]],void 0===c)return;return c[d[f]](b)}},enableTabBar:function(){a(document).on("click",".button-grouped.tabbed",function(b){var c=a(b.target);c.closest(".tabbed").find(".button").data("ignore-pressed","true").removeClass("pressed"),c.closest(".button").addClass("pressed"),setTimeout(function(){c.closest(".button").addClass("pressed")})})},disableTabBar:function(){a(document).off("click",".button-grouped.tabbed"),a(".button-grouped.tabbed .button").removeAttr("data-ignore-pressed")},setLeftSideMenuWidth:function(b){var c,d;this.sideMenuWidth=b,b+="",b=b.replace("px","")+"px",c=numOnly(window.innerWidth)-numOnly(b),a("head").find("style#afui_sideMenuWidth").remove(),d="@media handheld, only screen and (min-width: 768px) {#afui > #navbar.hasMenu.splitview, #afui > #header.hasMenu.splitview, #afui > #content.hasMenu.splitview  {    margin-left:"+b+" !important;"+"    width: "+c+"px !important;"+"}"+"}"+"#afui #menu {width:"+b+"  !important}",a("head").append("<style id='afui_sideMenuWidth'>"+d+"</style>")},setSideMenuWidth:function(){this.setLeftSideMenuWidth.apply(this,arguments)},setRightSideMenuWidth:function(b){this.sideMenuWidth=b,b+="",b=b.replace("px","")+"px",a("head").find("style#afui_asideMenuWidth").remove(),a("head").append("<style id='afui_asideMenuWidth'>#afui #aside_menu {width:"+b+"  !important}</style>")},disableNativeScrolling:function(){a.feat.nativeTouchScroll=!1},manageHistory:!0,loadDefaultHash:!0,useAjaxCacheBuster:!1,actionsheet:function(b){return a.query("#afui").actionsheet(b)},popup:function(b){return a.query("#afui").popup(b)},blockUI:function(b){a.blockUI(b)},unblockUI:function(){a.unblockUI()},removeFooterMenu:function(){a.query("#navbar").hide(),this.showNavMenu=!1},showNavMenu:!0,autoLaunch:!0,showBackbutton:!0,showBackButton:!0,backButtonText:"",resetScrollers:!0,ready:function(b){this.launchCompleted?b():a(document).on("afui:ready",function(){b()})},setBackButtonStyle:function(b){a.query("#header #backButton").get(0).className=b},goBack:function(a){if(a=Math.min(Math.abs(~~a||1),this.history.length)){var b=this.history.splice(-a).shift();this.loadContent(b.target+"",0,1,b.transition),this.transitionType=b.transition,this.updateHash(b.target)}},clearHistory:function(){this.history=[],this.setBackButtonVisibility(!1)},pushHistory:function(b,d,e,f){this.history.push({target:b,transition:e});try{if(!this.manageHistory)return;window.history.pushState(d,d,c+"#"+d+f),a(window).trigger("hashchange",null,{newUrl:c+"#"+d+f,oldUrl:c+b})}catch(g){}},updateHash:function(b){var d,f;if(this.manageHistory){b=-1===b.indexOf("#")?"#"+b:b,e=b,d=window.location.hash,f=this.getPanelId(b).substring(1);try{window.history.replaceState(f,f,c+b),a(window).trigger("hashchange",null,{newUrl:c+b,oldUrl:c+d})}catch(g){}}},getPanelId:function(a){var b=a.indexOf("/");return-1===b?a:a.substring(0,b)},updateBadge:function(b,c,d,e){var f,g;void 0===d&&(d=""),f=a(b),g=f.find("span.af-badge"),0===g.length?("absolute"!==f.css("position")&&f.css("position","relative"),g=a.create("span",{className:"af-badge "+d,html:c}),f.append(g)):g.html(c),g.removeClass("tl bl br tr"),g.addClass(d),void 0===e&&(e="red"),a.isObject(e)?g.css(e):e&&g.css("background",e),g.data("ignore-pressed","true")},removeBadge:function(b){a(b).find("span.af-badge").remove()},toggleNavMenu:function(b){this.showNavMenu&&("none"!==a.query("#navbar").css("display")&&(void 0!==b&&b!==!0||void 0===b)?a.query("#navbar").hide():(void 0===b||void 0!==b&&b===!0)&&a.query("#navbar").show())},toggleHeaderMenu:function(b){"none"!==a.query("#header").css("display")&&(void 0!==b&&b!==!0||void 0===b)?a.query("#header").hide():(void 0===b||void 0!==b&&b===!0)&&a.query("#header").show()},toggleAsideMenu:function(){this.toggleRightSideMenu.apply(this,arguments)},toggleRightSideMenu:function(a,b,c){return this.isAsideMenuEnabled()?this.toggleLeftSideMenu(a,b,c,!0):void 0},toggleLeftSideMenu:function(b,c,d,e){var f,g,h,i,j,k,l,m;!this.isSideMenuEnabled()&&!this.isAsideMenuEnabled()||this.togglingSideMenu||(e||this.isSideMenuEnabled())&&(!e&&a.ui.splitview&&window.innerWidth>=a.ui.handheldMinWidth||(f=this,g=a.query("#menu"),h=a.query("#aside_menu"),i=a.query("#content,  #header, #navbar"),j=a.query(".afui_panel_mask"),d=d||this.transitionTime,k=this.isSideMenuOn(),l=e?"-"+h.width():g.width(),0===j.length&&window.innerWidth<a.ui.handheldMinWidth&&(i.append("<div class='afui_panel_mask'></div>"),j=a.query(".afui_panel_mask"),a(".afui_panel_mask").bind("click",function(){a.ui.toggleSideMenu(!1,null,null,e)})),m=this.getSideMenuPosition(),k&&!e&&0>m?k=!1:k&&e&&m>0&&(k=!1),2===b||!k&&(void 0!==b&&b!==!1||void 0===b)?(this.togglingSideMenu=!0,e?h.show():g.show(),f.css3animate(i,{x:l,time:d,complete:function(b){f.togglingSideMenu=!1,i.vendorCss("Transition",""),c&&c(b),0!==j.length&&window.innerWidth<a.ui.handheldMinWidth&&j.show()}})):(void 0===b||void 0!==b&&b===!1)&&(this.togglingSideMenu=!0,f.css3animate(i,{x:"0px",time:d,complete:function(b){i.vendorCss("Transition",""),i.vendorCss("Transform",""),f.togglingSideMenu=!1,c&&c(b),a.ui.splitview||g.hide(),h.hide(),0!==j.length&&window.innerWidth<a.ui.handheldMinWidth&&j.hide()}}))))},toggleSideMenu:function(){this.toggleLeftSideMenu.apply(this,arguments)},disableSideMenu:function(){this.disableLeftSideMenu()},disableLeftSideMenu:function(){var c=a.query("#content, #header, #navbar");this.isSideMenuOn()?this.toggleSideMenu(!1,function(a){a||c.removeClass("hasMenu")}):c.removeClass("hasMenu")},enableLeftSideMenu:function(){a.query("#content, #header, #navbar").addClass("hasMenu")},enableSideMenu:function(){return this.enableLeftSideMenu()},disableRightSideMenu:function(){var c=a.query("#content, #header, #navbar");this.isSideMenuOn()?this.toggleSideMenu(!1,function(a){a||c.removeClass("hasAside")}):c.removeClass("hasAside")},enableRightSideMenu:function(){a.query("#content, #header, #navbar").addClass("hasAside")},isSideMenuEnabled:function(){return a.query("#content").hasClass("hasMenu")},isAsideMenuEnabled:function(){return a.query("#content").hasClass("hasAside")},isSideMenuOn:function(){var a=0!==this.getSideMenuPosition()?!0:!1;return(this.isSideMenuEnabled()||this.isAsideMenuEnabled)&&a},getSideMenuPosition:function(){return numOnly(parseFloat(a.getCssMatrix(a("#content")).e))},splitview:!0,disableSplitView:function(){a.query("#content, #header, #navbar, #menu").removeClass("splitview"),this.splitview=!1},prevFooter:null,updateNavbarElements:function(b){var c,d,e,f;if(this.prevFooter&&(this.prevFooter.data("parent")?this.prevFooter.appendTo("#"+this.prevFooter.data("parent")):this.prevFooter.appendTo("#afui")),a.is$(b)||(b=a.query("#"+b)),a.query("#navbar").append(b),this.prevFooter=b,c=a.query("#navbar > footer > a:not(.button)"),c.length>0&&(c.data("ignore-pressed","true").data("resetHistory","true"),d=parseFloat(100/c.length),c.css("width",d+"%")),e=a.query("#navbar footer"),0!==e.length)for(e=e.get(0).childNodes,f=0;f<e.length;f++)3===e[f].nodeType&&e[f].parentNode.removeChild(e[f])},prevHeader:null,updateHeaderElements:function(b,c){var e,f,d=this;if(a.is$(b)||(b=a.query("#"+b)),b!==this.prevHeader)if(this._currentHeaderID=b.prop("id"),this.prevHeader){if(a.query("#header").append(b),!a.ui.animateHeaders)return d.prevHeader.data("parent")?d.prevHeader.appendTo("#"+d.prevHeader.data("parent")):d.prevHeader.appendTo("#afui"),d.prevHeader=b,void 0;e=c?"100px":"-100px",f=c?"-100px":"100px",d.prevHeader.addClass("ignore"),d.css3animate(b,{x:f,opacity:.3,time:"1ms"}),d.css3animate(d.prevHeader,{x:e,y:0,opacity:.3,time:d.transitionTime,delay:numOnly(d.transitionTime)/5+"ms",complete:function(){d.prevHeader.data("parent")?d.prevHeader.appendTo("#"+d.prevHeader.data("parent")):d.prevHeader.appendTo("#afui"),d.prevHeader.removeClass("ignore"),d.css3animate(d.prevHeader,{x:f,opacity:1,time:"1ms"}),d.prevHeader=b}}),d.css3animate(b,{x:"0px",opacity:1,time:d.transitionTime})}else a.query("#header").append(b),this.prevHeader=b},previAsideMenu:null,updateAsideElements:function(){return this.updateRightSideMenuElements.apply(this,arguments)},updateRightSideMenuElements:function(b){if(void 0!==b&&null!==b){var d=a.query("#aside_menu_scroller");this.prevAsideMenu&&(this.prevAsideMenu.insertBefore("#afui #aside_menu"),this.prevAsideMenu=null),a.is$(b)||(b=a.query("#"+b)),d.html(""),d.append(b),this.prevAsideMenu=b,this.scrollingDivs.aside_menu_scroller.hideScrollbars(),this.scrollingDivs.aside_menu_scroller.scrollToTop()}},updateSideMenu:function(a){return this.updateSideMenuElements(a)},updateSideMenuElements:function(){return this.updateLeftSideMenuElements.apply(this,arguments)},updateLeftSideMenuElements:function(b){if(void 0!==b&&null!==b){var d=a.query("#menu_scroller");this.prevMenu&&(this.prevMenu.insertBefore("#afui #menu"),this.prevMenu=null),a.is$(b)||(b=a.query("#"+b)),d.html(""),d.append(b),this.prevMenu=b,this.scrollingDivs.menu_scroller.hideScrollbars(),this.scrollingDivs.menu_scroller.scrollToTop()}},setTitle:function(b){"defaultHeader"===this._currentHeaderID&&a.query("#header header:not(.ignore)  #pageTitle").html(b)},setBackButtonText:function(b){"defaultHeader"===this._currentHeaderID&&(this.trimBackButtonText&&b.length>=7&&(b=b.substring(0,5)+"..."),this.backButtonText.length>0?a.query("#header header:not(.ignore) #backButton").html(this.backButtonText):a.query("#header header:not(.ignore)  #backButton").html(b))},setBackButtonVisibility:function(b){b?a.query("#header #backButton").css("visibility","visible"):a.query("#header #backButton").css("visibility","hidden")},showMask:function(b){b||(b=this.loadingText||""),a.query("#afui_mask>h1").html(b),a.query("#afui_mask").show()},hideMask:function(){a.query("#afui_mask").hide()},modalReference_:null,showModal:function(b,c){var e,f,g,h,i,j,k,l,m,n,o,d=this;if(this.modalTransition=c||"up",e=a.query("#modalContainer"),"string"==typeof b&&(b="#"+b.replace("#","")),f=a.query(b),this.modalReference_=f,g=a.query("#afui_modal"),f.length){if(h=this.scrollingDivs.hasOwnProperty(f.attr("id")),a.feat.nativeTouchScroll||a.os.desktop||!h?(i=f.contents(),e.append(i)):(i=a(f.get(0).childNodes[0]).contents(),e.children().eq(0).append(i)),this.runTransition(this.modalTransition,d.modalTransContainer,d.modalWindow,!1),a(d.modalWindow).css("display",""),a(d.modalWindow).addClass("display","flexContainer"),h?this.scrollingDivs.modal_container.enable(d.resetScrollers):this.scrollingDivs.modal_container.disable(),e.addClass("panel").show(),"none"===f.data("header")?g.find("#modalHeader").hide():i.filter("header").length>0?g.find("#modalHeader").append(i.filter("header")).show():g.find("#modalHeader").append(a.create("header",{className:"header"}).append(a.create("h1",{html:f.data("title")}).get(0)).append(a.create("a",{className:"button icon close"}).attr("onclick","$.ui.hideModal()").get(0))).show(),"none"===f.data("footer"))g.find("#modalFooter").hide();else if(i.filter("footer").length>0){if(g.find("#modalFooter").append(i.filter("footer")).show(),j=a.query("#modalFooter > footer > a:not(.button)"),j.length>0&&(k=parseFloat(100/j.length),j.css("width",k+"%")),l=a.query("#modalFooter footer"),0===l.length)return;for(l=l.get(0).childNodes,m=0;m<l.length;m++)3===l[m].nodeType&&l[m].parentNode.removeChild(l[m])}else g.find("#modalFooter").hide();this.scrollToTop("modal"),e.data("panel",b),n=f.get(0),o=n.getAttribute("data-load"),o&&this.dispatchPanelEvent(o,n),f.trigger("loadpanel")}},hideModal:function(){var e,f,b=this,c=a.query("#modalContainer"),d=this.scrollingDivs.hasOwnProperty(this.modalReference_.attr("id"));this.runTransition(b.modalTransition,b.modalWindow,b.modalTransContainer,!0),this.scrollingDivs.modal_container.disable(),e=a.query(c.data("panel")),f=e.data("unload"),f&&this.dispatchPanelEvent(f,e.get(0)),e.trigger("unloadpanel"),setTimeout(function(){a.feat.nativeTouchScroll||a.os.desktop||!d?(b.modalReference_.append(a("#modalHeader header")),b.modalReference_.append(c.contents()),b.modalReference_.append(a("#modalFooter footer"))):(b.modalReference_.children().eq(0).append(a("#modalHeader header")),a(b.modalReference_.get(0).childNodes[0]).append(c.children().eq(0).contents()),b.modalReference_.children().eq(0).append(a("#modalFooter footer")))},this.transitionTime)},updatePanel:function(b,c){var d,e,f;b="#"+b.replace("#",""),d=a.query(b).get(0),d&&(e=a.create("div",{html:c}),e=e.children(".panel")&&e.children(".panel").length>0?e.children(".panel").get(0):e.get(0),!d.getAttribute("js-scrolling")||"yes"!==d.getAttribute("js-scrolling").toLowerCase()&&"true"!==d.getAttribute("js-scrolling").toLowerCase()?(a.cleanUpContent(d,!1,!0),a(d).html(c),f=this.scrollingDivs[d.id],f&&f.refresh&&f.addPullToRefresh()):(a.cleanUpContent(d.childNodes[0],!1,!0),a(d.childNodes[0]).html(c)),e.getAttribute("data-title")&&d.setAttribute("data-title",e.getAttribute("data-title")))},updateContentDiv:function(a,b){return this.updatePanel(a,b)},addContentDiv:function(b,c,d,e,f){var g,h,i;return b="string"!=typeof b?b:-1===b.indexOf("#")?"#"+b:b,g=a.query(b).get(0),g?h=g:(h=a.create("div",{html:c}),h=h.children(".panel")&&h.children(".panel").length>0?h.children(".panel").get(0):h.get(0),!h.getAttribute("data-title")&&d&&h.setAttribute("data-title",d),i=h.id?h.id:b.replace("#",""),h.id=i,h.id!==b&&h.setAttribute("data-crc",b.replace("#",""))),h.className="panel",i=h.id,this.addDivAndScroll(h,e,f),g=null,h=null,i},addDivAndScroll:function(b,c,d,e){var h,k,f=this,g=!1,i=b.style.overflow,j="hidden"!==i&&"visible"!==i;return e=e||this.content,a.feat.nativeTouchScroll||!j||a.os.desktop||b.setAttribute("js-scrolling","true"),!b.getAttribute("js-scrolling")||"yes"!==b.getAttribute("js-scrolling").toLowerCase()&&"true"!==b.getAttribute("js-scrolling").toLowerCase()||(g=!0,j=!0),k=b.getAttribute("data-title")||b.title,b.title="",b.setAttribute("data-title",k),(a(b).hasClass("no-scroll")||b.getAttribute("scrolling")&&"no"===b.getAttribute("scrolling"))&&(j=!1,g=!1,b.removeAttribute("js-scrolling")),g?(h=b,e.appendChild(b),this.selectBox!==!1&&this.selectBox.getOldSelects(h.id),this.passwordBox!==!1&&this.passwordBox.getOldPasswords(h.id)):(e.appendChild(b),h=b,b.style["-webkit-overflow-scrolling"]="none"),j&&(this.scrollingDivs[h.id]=a(b).scroller({scrollBars:!0,verticalScroll:!0,horizontalScroll:f.horizontalScroll,vScrollCSS:"afScrollbar",refresh:c,useJsScroll:g,lockBounce:this.lockPageBounce,autoEnable:!1}),a(b).addClass("y-scroll"),f.horizontalScroll&&a(b).addClass("x-scroll"),d&&a.bind(this.scrollingDivs[h.id],"refresh-release",function(a){a&&d()}),g&&a(b).children().eq(0).addClass("afScrollPanel")),h.id},scrollToTop:function(a,b){b=b||"300ms",a=a.replace("#",""),this.scrollingDivs[a]&&this.scrollingDivs[a].scrollToTop(b)},scrollToBottom:function(a,b){a=a.replace("#",""),this.scrollingDivs[a]&&this.scrollingDivs[a].scrollToBottom(b)},parsePanelFunctions:function(b,c,d){var h,i,j,k,l,e=this,f=b.getAttribute("data-footer"),g=b.getAttribute("data-header");f&&"none"===f.toLowerCase()?(e.toggleNavMenu(!1),f=!1):e.toggleNavMenu(!0),f&&e.customFooter!==f?(e.customFooter=f,e.updateNavbarElements(f)):f!==e.customFooter&&(e.customFooter&&e.updateNavbarElements(e.defaultFooter),e.customFooter=!1),g&&"none"===g.toLowerCase()?(e.toggleHeaderMenu(!1),g=!1):e.toggleHeaderMenu(!0),g&&e.customHeader!==g?(e.customHeader=g,e.updateHeaderElements(g,d)):g!==e.customHeader&&(e.customHeader&&e.updateHeaderElements(e.defaultHeader,d),e.customHeader=!1),h=a(b).find("footer"),h.length>0&&(e.customFooter=b.id,h.data("parent",b.id),e.updateNavbarElements(h)),i=a(b).find("header"),i.length>0&&(e.customHeader=b.id,i.data("parent",b.id),e.updateHeaderElements(i,d)),b.getAttribute("data-tab")&&(a.query("#navbar>footer>a:not(.button)").removeClass("pressed"),a.query("#navbar #"+b.getAttribute("data-tab")).addClass("pressed")),j=b.getAttribute("data-left-menu")||b.getAttribute("data-nav"),j&&this.customMenu!==j?(this.customMenu=j,this.updateSideMenuElements(j)):j!==this.customMenu&&(this.customMenu&&this.updateSideMenuElements(this.defaultMenu),this.customMenu=!1),k=b.getAttribute("data-right-menu")||b.getAttribute("data-aside"),k&&this.customAside!==k?(this.customAside=k,this.updateAsideElements(k)):k!==this.customAside&&(this.customAside&&this.updateAsideElements(this.defaultAside),this.customAside=!1),c&&(l=c.getAttribute("data-unload"),l&&this.dispatchPanelEvent(l,c),a(c).trigger("unloadpanel")),l=b.getAttribute("data-load"),l&&this.dispatchPanelEvent(l,b),a(b).trigger("loadpanel"),this.isSideMenuOn()&&e.toggleSideMenu(!1)},parseScriptTags:function(b){b&&a.parseJS(b)},loadContent:function(b,c,d,e,f){var j,k,l;return this.doingTransition?(this.loadContentQueue.push([b,c,d,e,f]),void 0):(0!==b.length&&(j=!0,f=f||document.createElement("a"),-1===b.indexOf("#")&&(k="url"+i(b),l=a.query("div.panel[data-crc='"+k+"']"),a.query("#"+b).length>0?j=!1:l.length>0?(j=!1,"true"===f.getAttribute("data-refresh-ajax")||f.refresh&&f.refresh===!0||this.isAjaxApp?j=!0:b="#"+l.get(0).id):a.query("#"+k).length>0&&(j=!1,"true"===f.getAttribute("data-refresh-ajax")||f.refresh&&f.refresh===!0||this.isAjaxApp?j=!0:b="#"+k)),-1===b.indexOf("#")&&j?this.loadAjax(b,c,d,e,f):this.loadDiv(b,c,d,e)),void 0)},loadDiv:function(b,c,d,f){var k,l,g=this,h=b.replace("#",""),i=h.indexOf("/"),j="";return-1!==i&&(j=h.substr(i),h=h.substr(0,i)),(h=a.query("#"+h).get(0))?h!==this.activeDiv||d?(this.transitionType=f,k=this.activeDiv,l=h,"true"===h.getAttribute("data-modal")||"true"===h.getAttribute("modal")?this.showModal(h.id):(k!==l&&(c?(this.clearHistory(),this.pushHistory("#"+this.firstDiv.id,h.id,f,j)):d||this.pushHistory(e,h.id,f,j),e="#"+h.id+j,this.doingTransition=!0,k.style.display="block",l.style.display="block",this.runTransition(f,k,l,d),this.parsePanelFunctions(h,k,d),this.loadContentData(h,c,d,f),a.feat.nativeTouchScroll?setTimeout(function(){g.scrollingDivs[k.id]&&g.scrollingDivs[k.id].disable()},numOnly(g.transitionTime)+50):"undefined"!=typeof g.scrollingDivs[k.id]&&g.scrollingDivs[k.id].disable()),void 0)):(this.isSideMenuOn()&&this.toggleSideMenu(!1),void 0):(a(document).trigger("missingpanel",null,{missingTarget:b}),void 0)},loadContentData:function(b,c,d){var f,g,h,i;d?this.history.length>0&&(h=this.history[this.history.length-1],i=h.target.indexOf("/"),f=-1!==i?h.target.substr(0,i):h.target,g=a.query(f).get(0),g?this.setBackButtonText(g.getAttribute("data-title")):this.setBackButtonText("Back")):this.activeDiv.getAttribute("data-title")?this.setBackButtonText(this.activeDiv.getAttribute("data-title")):this.setBackButtonText("Back"),b.getAttribute("data-title")&&this.setTitle(b.getAttribute("data-title")),c&&(this.setBackButtonText(this.firstDiv.getAttribute("data-title")),b===this.firstDiv&&(this.history.length=0)),a("#header #menubadge").css("float","right"),0===this.history.length?(this.setBackButtonVisibility(!1),this.history=[],a("#header #menubadge").css("float","left")):this.showBackButton&&this.showBackbutton&&this.setBackButtonVisibility(!0),this.activeDiv=b,this.scrollingDivs[this.activeDiv.id]&&this.scrollingDivs[this.activeDiv.id].enable(this.resetScrollers)},loadAjax:function(b,c,d,e,f){var g,h,j,k;("afui_ajax"!==this.activeDiv.id||b!==this.ajaxUrl)&&(g="url"+i(b),h=this,-1===b.indexOf("http")&&(b=intel.xdk.webRoot+b),j=new XMLHttpRequest,f&&"object"!=typeof f&&(f=document.createElement("a"),f.setAttribute("data-persist-ajax",!0)),f=f||document.createElement("a"),j.onreadystatechange=function(){var i,k,l,m,n,o;return 4===j.readyState&&200===j.status?(this.doingTransition=!1,k=!1,l=a.query("#"+g),l.length>0?(h.updatePanel(g,j.responseText),l.get(0).setAttribute("data-title",f.title?f.title:b)):f.getAttribute("data-persist-ajax")||h.isAjaxApp?(m="true"===f.getAttribute("data-pull-scroller")?!0:!1,i=m?function(){f.refresh=!0,h.loadContent(b,c,d,e,f),f.refresh=!1}:null,n=a(j.responseText),n.hasClass("panel")?(g=n.attr("id"),n=n.get(0).innerHTML):n=n.html(),a("#"+g).length>0?h.updatePanel("#"+g,n):a("div.panel[data-crc='"+g+"']").length>0?(h.updatePanel(a("div.panel[data-crc='"+g+"']").get(0).id,n),g=a("div.panel[data-crc='"+g+"']").get(0).id):g=h.addContentDiv(g,j.responseText,f.title?f.title:b,m,i)):(h.updatePanel("afui_ajax",j.responseText),a.query("#afui_ajax").get(0).setAttribute("data-title",f.title?f.title:b),h.loadContent("#afui_ajax",c,d,e),k=!0),o=document.createElement("div"),a(o).html(j.responseText),h.parseScriptTags(o),k?(h.showLoading&&h.hideMask(),void 0):(h.loadContent("#"+g,c,d,e),h.showLoading&&h.hideMask(),null)):(4===j.readyState&&a.ui.hideMask(),void 0)},this.ajaxUrl=b,k=this.useAjaxCacheBuster?b+(b.split("?")[1]?"&":"?")+"cache="+1e16*Math.random():b,j.open("GET",k,!0),j.setRequestHeader("X-Requested-With","XMLHttpRequest"),j.send(),this.showLoading&&this.showMask())},runTransition:function(a,b,c,d){this.availableTransitions[a]||(a="default"),"none"===b.style.display&&(b.style.display="block"),"none"===c.style.display&&(c.style.display="block"),this.availableTransitions[a].call(this,b,c,d)},launch:function(){var b,c,f,h,i,j,k,l,m,o,p,q,r,s,t,u;if(this.hasLaunched===!1||this.launchCompleted)return this.hasLaunched=!0,void 0;if(this.isLaunching)return!0;for(this.isLaunching=!0,b=this,this.viewportContainer=af.query("#afui"),this.navbar=af.query("#navbar").get(0),this.content=af.query("#content").get(0),this.header=af.query("#header").get(0),this.menu=af.query("#menu").get(0),this.viewportContainer.on("click","a",function(a){b.useInternalRouting&&g(a,a.currentTarget)}),c=null,a.bind(a.touchLayer,"enter-edit",function(a){c=a}),a.os.android&&!a.os.androidICS&&(a.bind(a.touchLayer,"enter-edit-reshape",function(){var f,g,d=a(c),e=d.closest(b.activeDiv);e&&e.size()>0&&(f=d.offset(),g=e.offset(),f.bottom>g.bottom&&f.height<g.height&&b.scrollingDivs[b.activeDiv.id].scrollToItem(d,"bottom"))}),a.bind(a.touchLayer,"exit-edit-reshape",function(){b.activeDiv&&b.activeDiv.id&&b.scrollingDivs.hasOwnProperty(b.activeDiv.id)&&b.scrollingDivs[b.activeDiv.id].setPaddings(0,0)})),this.navbar||(this.navbar=a.create("div",{id:"navbar"}).get(0),this.viewportContainer.append(this.navbar)),this.header||(this.header=a.create("div",{id:"header"}).get(0),this.viewportContainer.prepend(this.header)),this.content||(this.content=a.create("div",{id:"content"}).get(0),a(this.content).insertAfter(this.header)),this.menu||(this.menu=a.create("div",{id:"menu",html:"<div id='menu_scroller'></div>"}).get(0),this.viewportContainer.append(this.menu),this.menu.style.overflow="hidden",this.scrollingDivs.menu_scroller=a.query("#menu_scroller").scroller({scrollBars:!0,verticalScroll:!0,vScrollCSS:"afScrollbar",useJsScroll:!a.feat.nativeTouchScroll,autoEnable:!0,lockBounce:this.lockPageBounce,hasParent:!0}),a.feat.nativeTouchScroll&&a.query("#menu_scroller").css("height","100%"),this.asideMenu=a.create("div",{id:"aside_menu",html:"<div id='aside_menu_scroller'></div>"}).get(0),this.viewportContainer.append(this.asideMenu),this.asideMenu.style.overflow="hidden",this.scrollingDivs.aside_menu_scroller=a.query("#aside_menu_scroller").scroller({scrollBars:!0,verticalScroll:!0,vScrollCSS:"afScrollbar",useJsScroll:!a.feat.nativeTouchScroll,autoEnable:!0,lockBounce:this.lockPageBounce,hasParent:!0}),a.feat.nativeTouchScroll&&a.query("#aside_menu_scroller").css("height","100%")),a(this.header).html("<a id='backButton' class='button'></a> <h1 id='pageTitle'></h1>"+this.header.innerHTML),this.backButton=a.query("#header #backButton").css("visibility","hidden"),a(document).on("click","#header #backButton",function(a){a.preventDefault(),b.goBack()}),this.titlebar=a.query("#header #pageTitle").get(0),this.addContentDiv("afui_ajax",""),f=a.create("div",{id:"afui_mask",className:"ui-loader",html:"<span class='ui-icon ui-icon-loading spin'></span><h1>Loading Content</h1>"}).css({"z-index":2e4,display:"none"}),document.body.appendChild(f.get(0)),h=a.create("div",{id:"afui_modal"}).get(0),a(h).hide(),h.appendChild(a.create("div",{id:"modalHeader",className:"header"}).get(0)),h.appendChild(a.create("div",{id:"modalContainer"}).get(0)),h.appendChild(a.create("div",{id:"modalFooter",className:"footer"}).get(0)),this.modalTransContainer=a.create("div",{id:"modalTransContainer"}).appendTo(h).get(0),this.viewportContainer.append(h),this.scrollingDivs.modal_container=a.query("#modalContainer").scroller({scrollBars:!0,vertical:!0,vScrollCSS:"afScrollbar",lockBounce:this.lockPageBounce}),this.modalWindow=h,i={},j=this.viewportContainer.get(0).querySelectorAll(".panel"),k=0;k<j.length;k++)l=j[k],m=l,l.id,o=l.previousSibling,l.parentNode&&"content"!==l.parentNode.id?(m.getAttribute("selected")&&(this.firstDiv=l),this.addDivAndScroll(m),a.query("#content").append(l)):l.parsedContent||(l.parsedContent=1,m.getAttribute("selected")&&(this.firstDiv=l),this.addDivAndScroll(l),a(l).insertAfter(o)),l.getAttribute("data-defer")&&(i[l.id]=l.getAttribute("data-defer")),this.firstDiv||(this.firstDiv=l),l=null;if(j=null,p=!1,q=Object.keys(i).length,r=function(c){a.ajax({url:intel.xdk.webRoot+i[c],success:function(d){d.length>0&&(b.updatePanel(c,d),b.parseScriptTags(a.query("#"+c).get(0))),s++,s>=q&&(p=!1,a(document).trigger("defer:loaded"))},error:function(){console.log("Error with deferred load "+intel.xdk.webRoot+i[c]),s++,s>=q&&(p=!1,a(document).trigger("defer:loaded"))}})},q>0){p=!0,s=0;for(t in i)r(t)}this.firstDiv?(this.activeDiv=this.firstDiv,this.scrollingDivs[this.activeDiv.id]&&this.scrollingDivs[this.activeDiv.id].enable(),u=function(){var c,f,g,h,i;a.query("#navbar").append(a.create("footer",{id:"defaultNav"}).append(a.query("#navbar").children())),b.defaultFooter="defaultNav",b.prevFooter=a.query("#defaultNav"),b.updateNavbarElements(b.prevFooter),c=a.query("nav").get(0),c&&(b.defaultMenu=a(c),b.updateSideMenuElements(b.defaultMenu),b.prevMenu=b.defaultMenu),f=a.query("aside").get(0),f&&(b.defaultAside=a(f),b.updateAsideElements(b.defaultAside),b.prevAsideMenu=b.defaultAside),b.defaultHeader="defaultHeader",a.query("#header").append(a.create("header",{id:"defaultHeader"}).append(a.query("#header").children())),b.prevHeader=a.query("#defaultHeader"),a.query("#header").addClass("header"),a.query("#navbar").addClass("footer"),a.query("#navbar").on("click","footer>a:not(.button)",function(b){a.query("#navbar>footer>a").not(b.currentTarget).removeClass("pressed"),a(b.currentTarget).addClass("pressed")}),a.query("nav").length>0&&(g=b.splitview?" splitview":"",a.query("#afui #header").addClass("hasMenu"+g),a.query("#afui #content").addClass("hasMenu"+g),a.query("#afui #navbar").addClass("hasMenu"+g),a.query("#afui #menu").addClass("hasMenu"+g),a.query("#afui #aside_menu").addClass(g)),a.query("aside").length>0&&a.query("#afui #header, #afui #content, #afui #navbar").addClass("hasAside"),a.query("#afui #menu").addClass("tabletMenu"),a.ui.splitview&&window.innerWidth>parseInt(a.ui.handheldMinWidth,10)&&(a.ui.sideMenuWidth=a("#menu").width()+"px"),h=b.getPanelId(d),i=null!==h&&h==="#"+b.firstDiv.id,h.length>0&&b.loadDefaultHash&&!i?b.loadContent(d,!0,!1,"none"):(e="#"+b.firstDiv.id,b.firstDiv.style.display="block",b.parsePanelFunctions(b.firstDiv),b.loadContentData(b.firstDiv),a.query("#header #backButton").css("visibility","hidden"),("true"===b.firstDiv.getAttribute("data-modal")||"true"===b.firstDiv.getAttribute("modal"))&&b.showModal(b.firstDiv.id)),b.launchCompleted=!0,a.query("#afui #splashscreen").remove(),setTimeout(function(){a(document).trigger("afui:ready")
})},p?a(document).one("defer:loaded",u):u()):setTimeout(function(){a(document).trigger("afui:ready")}),a.bind(b,"content-loaded",function(){if(b.loadContentQueue.length>0){var a=b.loadContentQueue.splice(0,1)[0];b.loadContent(a[0],a[1],a[2],a[3],a[4])}}),(window.navigator.standalone||this.isIntel)&&this.blockPageScroll(),this.enableTabBar(),this.topClickScroll()},topClickScroll:function(){var a=this;document.getElementById("header").addEventListener("click",function(b){b.clientY<=15&&"h1"===b.target.nodeName.toLowerCase()&&a.scrollingDivs[a.activeDiv.id].scrollToTop("100")})},blockPageScroll:function(){a.query("#afui #header").bind("touchmove",function(a){a.preventDefault()})},noTransition:function(a,b){b.style.display="block",a.style.display="block";var d=this;d.clearAnimations(b),d.css3animate(a,{x:"0%",y:0}),d.finishTransition(a),b.style.zIndex=2,a.style.zIndex=1},finishTransition:function(b,c){b.style.display="none",this.doingTransition=!1,c&&this.clearAnimations(c),b&&this.clearAnimations(b),a.trigger(this,"content-loaded")},clearAnimations:function(b){b.style[a.feat.cssPrefix+"Transform"]="none",b.style[a.feat.cssPrefix+"Transition"]="none"}},g=function(b,c){var e,f,h,i,j,k,d=document.getElementById("afui");if(c!==d){if("a"!==c.tagName.toLowerCase()&&c.parentNode)return g(b,c.parentNode);if("undefined"!==c.tagName&&"a"===c.tagName.toLowerCase()){if(e="function"==typeof a.ui.customClickHandler?a.ui.customClickHandler:!1,e!==!1&&a.ui.customClickHandler(c,b))return b.preventDefault();if(-1!==c.href.toLowerCase().indexOf("javascript:")||c.getAttribute("data-ignore"))return;return-1===c.hash.indexOf("#")&&c.target.length>0?(0!==c.href.toLowerCase().indexOf("javascript:")&&(a.ui.isIntel?(b.preventDefault(),intel.xdk.device.launchExternal(c.href)):a.os.desktop||(b.target.target="_blank")),void 0):(f=c.href,h=location.protocol+"//"+location.hostname+":"+location.port+location.pathname,0===f.indexOf(h)&&(f=f.substring(h.length)),"#"===f||f.indexOf("#")===f.length-1||0===f.length&&0===c.hash.length?b.preventDefault():(i=/^((http|https|file):\/\/)/,-1!==c.href.indexOf(":")&&i.test(c.href)&&b.preventDefault(),j=c.getAttribute("data-transition"),k=c.getAttribute("data-resetHistory"),k=k&&"true"===k.toLowerCase()?!0:!1,f=c.hash.length>0?c.hash:f,a.ui.loadContent(f,k,0,j,c),void 0))}}},h="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",i=function(a,b){var c,d,e,f;for(void 0===b&&(b=0),c=0,d=0,b=-1^b,e=0,f=a.length;f>e;e++)c=255&(b^a.charCodeAt(e)),d="0x"+h.substr(9*c,8),b=b>>>8^d;return(-1^b)>>>0},a.ui=new f,a.ui.init=!0,a(window).trigger("afui:preinit"),a(window).trigger("afui:init")}(af),function(a){"use strict";a(document).one("intel.xdk.device.ready",function(){a.ui.isIntel=!0,setTimeout(function(){document.getElementById("afui").style.height="100%",document.body.style.height="100%",document.documentElement.style.minHeight=window.innerHeight},30)}),a.feat.nativeTouchScroll&&document.addEventListener("orientationchange",function(){if(a.ui.scrollingDivs[a.ui.activeDiv.id]){var c=a.ui.scrollingDivs[a.ui.activeDiv.id];if(!c)return;0===c.el.scrollTop&&(c.disable(),setTimeout(function(){c.enable()},300)),c.refresh&&c.updateP2rHackPosition()}})}(af),function(a){"use strict";function b(b,c,d){var e=this;d?(c.style.zIndex=1,b.style.zIndex=2,e.clearAnimations(c),e.css3animate(b,{x:"0%",time:a.transitionTime,opacity:.1,complete:function(a){return a?(e.finishTransition(b,c),void 0):(e.css3animate(b,{x:"-100%",opacity:1,complete:function(){e.finishTransition(b)}}),c.style.zIndex=2,b.style.zIndex=1,void 0)}})):(b.style.zIndex=1,c.style.zIndex=2,c.style.opacity=0,e.css3animate(c,{x:"0%",opacity:.1,complete:function(){e.css3animate(c,{x:"0%",time:a.transitionTime,opacity:1,complete:function(a){return a?(e.finishTransition(b,c),void 0):(e.clearAnimations(c),e.css3animate(b,{x:"-100%",y:0,complete:function(){e.finishTransition(b)}}),void 0)}})}}))}a.availableTransitions.fade=b}(af.ui),function(a){"use strict";function b(b,c,d){var e=this;d?(e.css3animate(c,{x:"100%",scale:.8,rotateY:"180deg",complete:function(){e.css3animate(c,{x:"0%",scale:1,time:a.transitionTime,rotateY:"0deg",complete:function(){e.clearAnimations(c)}})}}),e.css3animate(b,{x:"100%",time:a.transitionTime,scale:.8,rotateY:"180deg",complete:function(){e.css3animate(b,{x:"-100%",opacity:1,scale:1,rotateY:"0deg",complete:function(){e.finishTransition(b)}}),c.style.zIndex=2,b.style.zIndex=1}})):(b.style.zIndex=1,c.style.zIndex=2,e.css3animate(c,{x:"100%",scale:.8,rotateY:"180deg",complete:function(){e.css3animate(c,{x:"0%",scale:1,time:a.transitionTime,rotateY:"0deg",complete:function(){e.clearAnimations(c)}})}}),e.css3animate(b,{x:"100%",time:a.transitionTime,scale:.8,rotateY:"180deg",complete:function(){e.css3animate(b,{x:"-100%",opacity:1,scale:1,rotateY:"0deg",complete:function(){e.finishTransition(b)}}),c.style.zIndex=2,b.style.zIndex=1}}))}a.availableTransitions.flip=b}(af.ui),function(a){"use strict";function b(b,c,d){var e=this;d?(c.style.zIndex=1,b.style.zIndex=2,e.clearAnimations(c),e.css3animate(b,{x:"0%",time:a.transitionTime,opacity:.1,scale:.2,origin:"50% 50%",complete:function(a){return a?(e.finishTransition(b),void 0):(e.css3animate(b,{x:"-100%",complete:function(){e.finishTransition(b)}}),c.style.zIndex=2,b.style.zIndex=1,void 0)}})):(b.style.zIndex=1,c.style.zIndex=2,e.css3animate(c,{x:"0%",scale:.2,origin:"50% 50%",opacity:.1,time:"0ms",complete:function(){e.css3animate(c,{x:"0%",time:a.transitionTime,scale:1,opacity:1,origin:"0% 0%",complete:function(a){return a?(e.finishTransition(b,c),void 0):(e.clearAnimations(c),e.css3animate(b,{x:"100%",y:0,complete:function(){e.finishTransition(b)}}),void 0)}})}}))}a.availableTransitions.pop=b}(af.ui),function(a){"use strict";function b(b,c,d){var e=this;d?e.css3animate(b,{x:"0%",y:"0%",complete:function(){e.css3animate(b,{x:"100%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)}}).link(c,{x:"0%",time:a.transitionTime})}}).link(c,{x:"-100%",y:"0%"}):e.css3animate(b,{x:"0%",y:"0%",complete:function(){e.css3animate(b,{x:"-100%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)}}).link(c,{x:"0%",time:a.transitionTime})}}).link(c,{x:"100%",y:"0%"})}a.availableTransitions.slide=b,a.availableTransitions["default"]=b}(af.ui),function(a){"use strict";function b(b,c,d){var e=this;d?(b.style.zIndex=2,c.style.zIndex=1,e.css3animate(b,{y:"0%",x:"0%",complete:function(){e.css3animate(b,{y:"-100%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)}})}})):(b.style.zIndex=1,c.style.zIndex=2,e.css3animate(c,{y:"-100%",x:"0%",time:"10ms",complete:function(){e.css3animate(c,{y:"0%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)}})}}))}a.availableTransitions.down=b}(af.ui),function(a){"use strict";function b(b,c,d){var e=this;d?(b.style.zIndex=2,c.style.zIndex=1,e.css3animate(b,{y:"0%",x:"0%",complete:function(){e.css3animate(b,{y:"100%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)}})}})):(b.style.zIndex=1,c.style.zIndex=2,e.css3animate(c,{y:"100%",x:"0%",time:"10ms",complete:function(){e.css3animate(c,{y:"0%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)}})}}))}a.availableTransitions.up=b}(af.ui),function(a){"use strict";function b(){a.ui.isWin8=!0,a.os.ie&&a.ui.isSideMenuEnabled()&&a.ui.ready(function(){var b,c,d;return window.innerWidth>a.ui.handheldMinWidth?!0:(a.ui.slideSideMenu&&(a.ui.slideSideMenu=!1),a.query("#afui #navbar footer").append("<a id='metroMenu' onclick='$.ui.toggleSideMenu()'></a>"),b=a.query("#afui #navbar").find("a").not(".button"),b.length>0&&(b.data("ignore-pressed","true").data("resetHistory","true"),c=parseFloat(100/b.length),b.css("width",c+"%")),d=a.ui.updateNavbarElements,a.ui.updateNavbarElements=function(){d.apply(a.ui,arguments),1!==a.query("#afui #navbar #metroMenu").length&&a.query("#afui #navbar footer").append("<a id='metroMenu' onclick='$.ui.toggleSideMenu()'></a>")},a.ui.isSideMenuOn=function(){var b=parseInt(a.getCssMatrix(a("#navbar")).f,10)<0?!0:!1;return this.isSideMenuEnabled()&&b},a.ui.toggleRightSideMenu=function(b,c,d){var e,f,g,h,i,j,k,l,m;this.isAsideMenuEnabled()&&!this.togglingAsideMenu&&(e=!0,(e||this.isSideMenuEnabled())&&(e||!a.ui.splitview)&&(f=this,g=a("#menu"),h=a.query("#aside_menu"),i=a.query("#content,  #header, #navbar"),j=a.query(".afui_panel_mask"),d=d||this.transitionTime,k="block"===a("#aside_menu").css("display"),l=e?"-"+f.sideMenuWidth:f.sideMenuWidth,0===j.length&&window.innerWidth<a.ui.handheldMinWidth&&(i.append("<div class='afui_panel_mask'></div>"),j=a.query(".afui_panel_mask"),a(".afui_panel_mask").bind("click",function(){a.ui.toggleSideMenu(!1,null,null,e)})),m=this.getSideMenuPosition(),k&&!e&&0>m?k=!1:k&&e&&m>0&&(k=!1),2===b||!k&&(void 0!==b&&b!==!1||void 0===b)?(this.togglingSideMenu=!0,e?h.show():g.show(),f.css3animate(i,{x:l,time:d,complete:function(b){f.togglingSideMenu=!1,i.vendorCss("Transition",""),c&&c(b),0!==j.length&&window.innerWidth<a.ui.handheldMinWidth&&j.show()}})):(void 0===b||void 0!==b&&b===!1)&&(this.togglingSideMenu=!0,f.css3animate(i,{x:"0px",time:d,complete:function(b){i.vendorCss("Transition",""),i.vendorCss("Transform",""),f.togglingSideMenu=!1,c&&c(b),a.ui.splitview||g.hide(),h.hide(),0!==j.length&&window.innerWidth<a.ui.handheldMinWidth&&j.hide()}}))))},a.ui.toggleLeftSideMenu=function(b,c){var d,e,f,g;this.isSideMenuEnabled()&&!this.togglingSideMenu&&(this.togglingSideMenu=!0,d=this,e=a.query("#menu"),f=a.query("#navbar"),g=this.isSideMenuOn(),2===b||!g&&(void 0!==b&&b!==!1||void 0===b)?(e.show(),d.css3animate(f,{y:"-150px",time:a.ui.transitionTime,complete:function(){d.togglingSideMenu=!1,c&&c(!0)}}),d.css3animate(e,{y:"0px",time:a.ui.transitionTime})):(void 0===b||void 0!==b&&b===!1)&&(d.css3animate(f,{y:"0",time:a.ui.transitionTime,complete:function(){d.togglingSideMenu=!1,c&&c(!0),e.hide()}}),d.css3animate(e,{y:"150px",time:a.ui.transitionTime})))},void 0)})}if(!a)throw"This plugin requires AFUi";a.ui?a.ui.ready(function(){b()}):a(document).ready(function(){b()})}(af);